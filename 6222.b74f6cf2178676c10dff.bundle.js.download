"use strict";(self.webpackChunkpmw=self.webpackChunkpmw||[]).push([[6222],{78450:(e,t,n)=>{n.d(t,{k:()=>T,s:()=>A});var o=n(67294),i=n(12092),l=n(85444),a=n(50746),c=n(10106),r=n(23501),d=n(27098),s=n(99228),u=n(11811),w=n(48022),p=n(99111),m=n(81583),_=n(37526),g=n(17570),h=n(13780),f=n(70471),y=n(2220),x=n(35697),I=n(60001),v=n(90417),S=n(45570),C=n(57790),M=n(36131),O=n(37159),N=function(e,t,n,o){return new(n||(n=Promise))((function(i,l){function a(e){try{r(o.next(e))}catch(e){l(e)}}function c(e){try{r(o.throw(e))}catch(e){l(e)}}function r(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}r((o=o.apply(e,t||[])).next())}))},E=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(o=Object.getOwnPropertySymbols(e);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(n[o[i]]=e[o[i]])}return n};const j="Untitled",D=560;var L;!function(e){e.CONFIRM="confirm-collection-rename",e.CANCEL="cancel-collection-rename"}(L||(L={}));const T=(e,t)=>({type:f.Z.COLLECTION,id:e.i,collectionId:e.i,collectionName:e.n,isShared:0!==e.s,multiMediaType:t});function A(e){var t,{onClicked:n=(()=>{})}=e,T=E(e,["onClicked"]);const[A,k]=(0,o.useState)(!1),F=(0,o.useRef)(null),[b,Z]=(0,o.useState)(!1),[P,R]=(0,o.useState)(!1),U=(0,o.useRef)(null),z=(0,o.useRef)(null),B=(0,M.C)((e=>{var t;return(0,r.WO)(e,null!==(t=T.gridId)&&void 0!==t?t:"",T.id)})),G=(0,M.T)(),{windowWidth:J}=(0,w.Z)();(0,o.useEffect)((()=>{A&&F.current&&(F.current.focus(),F.current.setSelectionRange(0,F.current.value.length))}),[A]),(0,o.useEffect)((()=>{H()&&te()}),[]);const Y=e=>{var t;G((0,r.oL)({gridId:null!==(t=T.gridId)&&void 0!==t?t:"",itemId:T.id,changes:{collectionName:e}}))},W=()=>{ne(),q()},H=()=>!(null==B?void 0:B.collectionId),q=e=>N(this,void 0,void 0,(function*(){let t=null!=e?e:null==B?void 0:B.collectionName;if((null==B?void 0:B.collectionId)&&t===z.current)z.current=null;else if(!t&&z.current&&(null==B?void 0:B.collectionId))Y(z.current);else{R(!0),t||(t=z.current?z.current:j,Y(t)),z.current=null;try{const e=yield window.PMW.writeLocal("collection/save",{name:t,hash:null==B?void 0:B.collectionId,collectionType:T.multiMediaType});K(e)}catch(e){yield ie(e)}finally{R(!1)}}})),K=e=>{var t;H()&&G((0,r.oL)({gridId:null!==(t=T.gridId)&&void 0!==t?t:"",itemId:T.id,changes:{id:e,collectionId:e}}))},Q=()=>J<D||(0,_.b1)(),X=()=>N(this,void 0,void 0,(function*(){yield window.PMW.writeLocal("collection/delete",{collectionId:null==B?void 0:B.collectionId,collectionType:T.multiMediaType}),ee()})),V=()=>N(this,void 0,void 0,(function*(){R(!0);try{yield window.PMW.writeLocal("collection/removeSharedCollection",{id:null==B?void 0:B.collectionId,collectionType:T.multiMediaType}),ee()}catch(e){yield ie(e)}finally{R(!1)}})),ee=()=>{T.gridId&&T.gridSelectionGroupId&&G((0,r.HQ)({gridId:T.gridId,gridSelectionGroupId:T.gridSelectionGroupId,itemIdsToDelete:[T.id]}))},te=()=>{z.current||(z.current=null==B?void 0:B.collectionName),Z(!1),k(!0)},ne=()=>{k(!1)},oe=()=>N(this,void 0,void 0,(function*(){(null==B?void 0:B.collectionId)?(0,s.n)({collectionId:null==B?void 0:B.collectionId,collectionType:T.multiMediaType}):console.warn("tried to share collection without ID")})),ie=(e,t=window.i18next.t("pmwjs_connectivity_error"))=>N(this,void 0,void 0,(function*(){e&&console.error(e),yield window.PMW.openErrorModal({message:t})}));let le,ae;return T.isShared?(ae=window.i18next.t("pmwjs_shared_collection_tooltip",{collectionName:null==B?void 0:B.collectionName,creatorName:T.creatorName}),le=o.createElement(C.J,{icon:"icon-collection-shared",size:Q()||!y.F1?i.ZG.SIZE_ICON_24:i.ZG.SIZE_ICON_16})):(ae=null==B?void 0:B.collectionName,le=o.createElement(C.J,{icon:"icon-prints-stack",size:Q()||!y.F1?i.ZG.SIZE_ICON_24:i.ZG.SIZE_ICON_16})),o.createElement(f.P,Object.assign({},T,{className:`${null!==(t=T.className)&&void 0!==t?t:""} flex-row-justify-between flex-items-center ${A&&Q()?O.Z.renameMode:O.Z.collection} ${Q()||A?"":O.Z.border}`,isSmallItem:!0,onClicked:(e,t)=>{$(e.target).parents(".options-container").length>0||!(null==B?void 0:B.collectionId)||A||n(e,t)},title:ae,ref:U}),A&&!Q()?(()=>{const e={showDefaultControls:!1,showSingleDefaultControlOnly:!1,customControls:[{id:L.CANCEL,type:x.B8.ICON_BTNS,icon:"icon-close"},{id:L.CONFIRM,type:x.B8.ICON_BTNS,icon:"icon-check"}],onClick(e,t){t&&t.stopPropagation(),e===L.CONFIRM?W():e===L.CANCEL&&(()=>{var e;ne(),Y(null!==(e=z.current)&&void 0!==e?e:j)})()}};return o.createElement(I.U,{ref:F,className:"spacing-m-l-1 spacing-m-r-1",input:null==B?void 0:B.collectionName,onInputSubmit:W,size:x.r3.SMALL,onInputChange:Y,controls:e,stopClickPropagation:!0})})():o.createElement(o.Fragment,null,o.createElement("div",{className:`flex-h-row flex-items-center flex-content-start _full-height ${O.Z.itemThumb}`},o.createElement("div",{className:`flex-center _full-height ${O.Z.iconContainer} ${Q()||!y.F1?O.Z.smallIconContainer:""}`},le),o.createElement(p.xv,{val:null==B?void 0:B.collectionName,size:p.JB.XSMALL,className:"body-xs spacing-m-0 spacing-p-l-3 spacing-p-r-3 -truncated-text"})),o.createElement("div",{className:"spacing-m-r-2 flex-center options-container"},P?o.createElement(v.p0,{size:v.MN.SMALL,classes:"spacing-m-r-3"}):Q()?o.createElement(C.J,{icon:"icon-menu-dots",className:"color-heading",size:i.ZG.SIZE_ICON_16,shape:i.q0.SQUARE,type:i.e1.NONE,onClick:()=>{(0,S.n)({collectionName:null==B?void 0:B.collectionName,deleteCollection:X,shareCollection:()=>{oe()},isSharedCollection:null==B?void 0:B.isShared,removeSharedCollection:()=>{V()},renameCollection:e=>{z.current=null==B?void 0:B.collectionName,q(e),Y(e)}})}}):o.createElement(u.L,{className:`radius-4 hover-transition-all ${Q()&&(null==B?void 0:B.collectionId)?O.Z.fixSelectorVisibility:""} ${A?"":O.Z.dropdownOptionsContainer} \n    ${O.Z.dropdownContainer} ${b?O.Z.dropdownOpen:""}`,selector:o.createElement(C.J,{icon:"icon-menu-dots",className:"color-heading",size:i.ZG.SIZE_ICON_16,shape:i.q0.SQUARE,type:i.e1.NONE}),popup:o.createElement(a.h,{id:"collections-option-dropdown",className:"spacing-m-0",items:(()=>T.isShared?[{id:"collection-option-delete",text:window.i18next.t("pmwjs_delete"),type:c.A.DEFAULT_7,color:m.d.danger,textClasses:O.Z.popupText,icon:"icon-delete",listSize:c.z.SMALL,onClick:()=>{G((0,g.Mr)(h.Fp.MORE_OPTIONS_MODAL)),(0,d.y)({text:window.i18next.t("pmwjs_confirmation_removing_share_collection"),onDeleteConfirmation:()=>{V()}})}}]:[{id:"collection-option-share",text:window.i18next.t("pmwjs_share"),type:c.A.DEFAULT_7,icon:"icon-group",listSize:c.z.SMALL,onClick:()=>{G((0,g.Mr)(h.Fp.MORE_OPTIONS_MODAL)),oe()}},{id:"collection-option-edit",text:window.i18next.t("pmwjs_rename"),type:c.A.DEFAULT_7,icon:"icon-pencil-line",listSize:c.z.SMALL,onClick:()=>{G((0,g.Mr)(h.Fp.MORE_OPTIONS_MODAL)),te()}},{id:"collection-option-delete",text:window.i18next.t("pmwjs_delete"),type:c.A.DEFAULT_7,color:m.d.danger,textClasses:O.Z.popupText,icon:"icon-delete",listSize:c.z.SMALL,onClick:()=>{G((0,g.Mr)(h.Fp.MORE_OPTIONS_MODAL)),(0,d.y)({text:window.i18next.t("pmwjs_confirmation_deleting_collection"),showBtnDeletingState:!0,onDeleteConfirmation:()=>N(this,void 0,void 0,(function*(){yield X()}))})}}])()}),position:l.H2.ABSOLUTE,popupClassName:O.Z.dropdownContent,popupSpacingClass:"spacing-p-l-2 spacing-p-r-2 spacing-p-t-2",popUpHasCustomWidth:!0,alignment:l.dO.BOTTOM_END,onOpen:()=>{Z(!0)},onClose:()=>{Z(!1)}}))))}},88562:(e,t,n)=>{n.d(t,{JL:()=>i,PP:()=>c,YU:()=>l,dD:()=>a});const o=(0,n(97168).oM)({name:"uploads",initialState:{collection:"",isFbPanelOpen:!1,unlinkedMedia:[]},reducers:{updateCurrentCollection:(e,t)=>{e.collection=t.payload},toggleIsFbPanelOpenState:(e,t)=>{e.isFbPanelOpen=t.payload},updateUnlinkedMediaState:(e,t)=>{e.unlinkedMedia=[...e.unlinkedMedia,...t.payload]}}}),{updateCurrentCollection:i,toggleIsFbPanelOpenState:l,updateUnlinkedMediaState:a}=o.actions,c=o.reducer},4033:(e,t,n)=>{var o,i,l,a,c;n.d(t,{BU:()=>o,Eq:()=>i,I8:()=>c,X$:()=>l,i5:()=>a}),function(e){e.NONE="none",e.CARET_RIGHT="icon-caret-right"}(o||(o={})),function(e){e.AUTO="auto",e.STRETCHED="stretched"}(i||(i={})),function(e){e.BLOCK="block",e.FLEX="flex"}(l||(l={})),function(e){e.DEFAULT="default",e.DARK="dark",e.PRIMARY_LIGHT="primary-light"}(a||(a={})),function(e){e.SLIDER_LINE="line",e.SLIDER_BLOCK="block"}(c||(c={}))},15669:(e,t,n)=>{n.d(t,{Al:()=>l,Jq:()=>d,K9:()=>c,LZ:()=>h,NA:()=>o,P2:()=>w,Sk:()=>g,_4:()=>r,fF:()=>s,hJ:()=>i,i0:()=>f,nr:()=>u,v4:()=>a,zk:()=>_});const o=7,i=e=>{const t=e,n=Math.floor(t/3600),o=Math.floor((t-3600*n)/60),i=Math.floor(t-3600*n-60*o);let l="";return n&&(l+=`${`00${n.toString(10)}`.slice(-2)}:`),l+=`${`00${o.toString(10)}`.slice(-2)}:${`00${i.toString(10)}`.slice(-2)}`,l},l=e=>{const t=e.getMonth()+1,n=e.getDate();return`${e.getFullYear()}/${t}/${n}`},a=e=>{const t=p(e);return`${e.getDate()} ${t}, ${m(e)}`},c=e=>Math.floor(e.getTime()/1e3);function r(e){const t=d(e).getTime();return new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}).format(t)}const d=e=>new Date(1e3*e),s=(e=new Date)=>{let t;return t=11===e.getMonth()?new Date(e.getFullYear()+1,0,1):new Date(e.getFullYear(),e.getMonth()+1,1),t},u=(e=new Date)=>{const t=e.getFullYear(),n=e.getMonth();return new Date(t,n,1)},w=(e=new Date)=>(e.setDate(e.getDate()-(e.getDay()||7)),e),p=e=>{return t=e.getMonth(),[window.i18next.t("pmwjs_calendar_january"),window.i18next.t("pmwjs_calendar_february"),window.i18next.t("pmwjs_calendar_march"),window.i18next.t("pmwjs_calendar_april"),window.i18next.t("pmwjs_calendar_may"),window.i18next.t("pmwjs_calendar_june"),window.i18next.t("pmwjs_calendar_july"),window.i18next.t("pmwjs_calendar_august"),window.i18next.t("pmwjs_calendar_september"),window.i18next.t("pmwjs_calendar_october"),window.i18next.t("pmwjs_calendar_november"),window.i18next.t("pmwjs_calendar_december")][t];var t},m=e=>[window.i18next.t("pmwjs_calendar_sunday"),window.i18next.t("pmwjs_calendar_monday"),window.i18next.t("pmwjs_calendar_tuesday"),window.i18next.t("pmwjs_calendar_wednesday"),window.i18next.t("pmwjs_calendar_thursday"),window.i18next.t("pmwjs_calendar_friday"),window.i18next.t("pmwjs_calendar_saturday")][e.getDay()],_=e=>(new Date).toDateString()===e.toDateString(),g=(e=new Date)=>{let t;return t=0===e.getMonth()?new Date(e.getFullYear()-1,11,1):new Date(e.getFullYear(),e.getMonth()-1,1),t},h=(e,t)=>e.toDateString()===t.toDateString(),f=e=>{const t=Math.floor(((new Date).getTime()-e.getTime())/1e3),n=Math.floor(t/31536e3),o=Math.floor(t/2592e3),i=Math.floor(t/604800),l=Math.floor(t/86400),a=Math.floor(t/3600),c=Math.floor(t/60);return 1===n?window.i18next.t("pmwjs_1_year_ago"):n>1?window.i18next.t("pmwjs_x_years_ago",{years:n}):1===o?window.i18next.t("pmwjs_1_month_ago"):o>1?window.i18next.t("pmwjs_x_months_ago",{months:o}):1===i?window.i18next.t("pmwjs_1_week_ago"):i>1?window.i18next.t("pmwjs_x_weeks_ago",{weeks:i}):1===l?window.i18next.t("pmwjs_1_day_ago"):l>1?window.i18next.t("pmwjs_x_days_ago",{days:l}):1===a?window.i18next.t("pmwjs_1_hour_ago"):a>1?window.i18next.t("pmwjs_x_hours_ago",{hours:a}):1===c?window.i18next.t("pmwjs_1_minute_ago"):c>1?window.i18next.t("pmwjs_x_minutes_ago",{minutes:c}):window.i18next.t("pmwjs_just_now")}}}]);
//# sourceMappingURL=6222.b74f6cf2178676c10dff.bundle.js.map
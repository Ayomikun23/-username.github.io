!function($){"use strict";function Gumby(){this.$dom=$(document),this.$html=this.$dom.find("html"),this.isOldie=!!this.$html.hasClass("oldie"),this.click="click",this.onReady=this.onOldie=this.onTouch=!1,this.autoInit="false"!==$("script[gumby-init]").attr("gumby-init"),this.debugMode=Boolean($("script[gumby-debug]").length),this.touchDevice=!!(Modernizr.touchevents||0<window.navigator.userAgent.indexOf("Windows Phone")),this.gumbyTouch=!1,this.touchEvents="js/libs",this.breakpoint=Number($("script[gumby-breakpoint]").attr("gumby-breakpoint"))||768,this.touchEventsLoaded=!1,this.uiModulesReady=!1,this.uiModules={},this.inits={};var touch=$("script[gumby-touch]").attr("gumby-touch"),path=$("script[gumby-path]").attr("gumby-path");"false"===touch?this.touchEvents=!1:touch?this.touchEvents=touch:path&&(this.touchEvents=path),this.touchDevice&&(this.click+=" tap"),this.touchDevice&&$(window).width()<this.breakpoint?(this.$html.addClass("gumby-touch"),this.gumbyTouch=!0):this.$html.addClass("gumby-no-touch"),this.debugMode&&this.debug("Gumby is in debug mode")}Gumby.prototype.init=function(options){var scope=this,opts=options||{};return this.$dom.ready(function(){opts.debug&&(scope.debugMode=!0),scope.debug("Initializing Gumby");var mods=opts.uiModules||!1;scope.initUIModules(mods),scope.onReady&&scope.onReady(),scope.isOldie&&scope.onOldie&&scope.onOldie(),Modernizr.touchevents&&scope.onTouch&&scope.onTouch()}),this},Gumby.prototype.helpers=function(){this.onReady&&this.onReady(),this.isOldie&&this.onOldie&&this.onOldie(),Modernizr.touchevents&&this.onTouch&&this.onTouch()},Gumby.prototype.ready=function(code){return code&&"function"==typeof code&&(this.onReady=code),this},Gumby.prototype.oldie=function(code){return code&&"function"==typeof code&&(this.onOldie=code),this},Gumby.prototype.touch=function(code){return code&&"function"==typeof code&&(this.onTouch=code),this},Gumby.prototype.console=function(type,data){this.debugMode&&window.console&&console[console[type]?type:"log"](1<data.length?Array.prototype.slice.call(data):data[0])},Gumby.prototype.log=function(){this.console("log",arguments)},Gumby.prototype.debug=function(){this.console("debug",arguments)},Gumby.prototype.warn=function(){this.console("warn",arguments)},Gumby.prototype.error=function(){this.console("error",arguments)},Gumby.prototype.dump=function(){return{$dom:this.$dom,isOldie:this.isOldie,touchEvents:this.touchEvents,debugMode:this.debugMode,autoInit:this.autoInit,uiModules:this.uiModules,click:this.click}},Gumby.prototype.selectAttr=function(){for(var i=0;i<arguments.length;i++){var attr=arguments[i],dataAttr="data-"+arguments[i],gumbyAttr="gumby-"+arguments[i];if(this.is("["+dataAttr+"]"))return!this.attr(dataAttr)||this.attr(dataAttr);if(this.is("["+gumbyAttr+"]"))return!this.attr(gumbyAttr)||this.attr(gumbyAttr);if(this.is("["+attr+"]"))return!this.attr(attr)||this.attr(attr)}return!1},Gumby.prototype.addInitalisation=function(ref,code){this.inits[ref]=code},Gumby.prototype.initialize=function(ref,all){if("object"==typeof ref)for(var i=0;i<ref.length;i++)this.inits[ref[i]]&&"function"==typeof this.inits[ref[i]]?this.inits[ref[i]](all):this.error("Error initializing module: "+ref[i]);else this.inits[ref]&&"function"==typeof this.inits[ref]?this.inits[ref](all):this.error("Error initializing module: "+ref);return this},Gumby.prototype.UIModule=function(data){var module=data.module;this.uiModules[module]=data},Gumby.prototype.initUIModules=function(mods){var x,m,arr=this.uiModules;for(x in arr=mods?mods:arr)m=mods?arr[x]:x,this.uiModules[m].init()},window.Gumby=new Gumby}(jQuery);
!function($){"use strict";Gumby.touchDevice&&Gumby.touchEvents||!Gumby.autoInit?Gumby.touchEvents&&Gumby.touchDevice&&(Gumby.debug("Loading jQuery mobile touch events"),yepnope.errorTimeout=2e3,Modernizr.load({test:Modernizr.touchevents,yep:PMW.util.asset_url("javascript/vendor/jquery.mobile.custom.min.js"),complete:function(){$.mobile||Gumby.error("Error loading jQuery mobile touch events"),Gumby.touchEventsLoaded=!0,Gumby.autoInit?window.Gumby.init():Gumby.uiModulesReady&&Gumby.helpers()}})):window.Gumby.init(),"function"==typeof define&&define.amd&&define(window.Gumby)}(jQuery);
!function($){"use strict";function Toggle($el){this.$el=$($el),this.targets=[],this.on="",this.className="",this.self=!1,this.$el.length&&(Gumby.debug("Initializing Toggle",$el),this.init())}function Switch($el){this.$el=$($el),this.targets=[],this.on="",this.className="",this.self=!1,this.$el.length&&(Gumby.debug("Initializing Switch",$el),this.init())}Toggle.prototype.init=function(){var scope=this;this.setup(),this.$el.on(this.on,function(e){e.preventDefault(),scope.trigger(scope.triggered)}).on("gumby.trigger",function(){Gumby.debug("Trigger event triggered",scope.$el),scope.trigger(scope.triggered)}).on("gumby.initialize",function(){Gumby.debug("Re-initializing "+scope.constructor,$el),scope.setup()})},Toggle.prototype.setup=function(){this.targets=this.parseTargets(),this.on=Gumby.selectAttr.apply(this.$el,["on"])||Gumby.click,this.className=Gumby.selectAttr.apply(this.$el,["classname"])||"active",this.self="false"===Gumby.selectAttr.apply(this.$el,["self"])},Toggle.prototype.parseTargets=function(){var targets,targetStr=Gumby.selectAttr.apply(this.$el,["trigger"]);return!!targetStr&&(-1===targetStr.indexOf("|")?!!this.checkTargets([targetStr])&&[$(targetStr)]:(targets=targetStr.split("|"),!!this.checkTargets(targets)&&(1<targets.length?[$(targets[0]),$(targets[1])]:[$(targets[0])])))},Toggle.prototype.checkTargets=function(targets){for(var i=0;i<targets.length;i++)if(targets[i]&&!$(targets[i]).length)return Gumby.error("Cannot find "+this.constructor.name+" target: "+targets[i]),!1;return!0},Toggle.prototype.triggered=function(){Gumby.debug("Triggering onTrigger event",this.$el),this.$el.trigger("gumby.onTrigger",[this.$el.hasClass(this.className)])},(Switch.prototype=new Toggle).constructor=Switch,Toggle.prototype.trigger=function(cb){Gumby.debug("Triggering Toggle",this.$el),this.targets?1==this.targets.length?Gumby.toggle(this.targets[0]):1<this.targets.length&&(0<this.targets[0].height()||0<this.targets[1].height()?(Gumby.toggle(this.targets[0]),Gumby.toggle(this.targets[1])):Gumby.toggle(this.targets[0])):Gumby.toggle(this.$el),cb&&"function"==typeof cb&&cb.apply(this)},Switch.prototype.trigger=function(cb){Gumby.debug("Triggering Switch",this.$el),this.targets?1==this.targets.length?Gumby.switch(this.targets[0]):1<this.targets.length&&(this.targets[0].is(":visible")?Gumby.switch(this.targets[1]):Gumby.switch(this.targets[0])):this.$el.addClass(this.className),cb&&"function"==typeof cb&&cb.apply(this)},Gumby.toggle=function(trigger){var autoHeight;0===trigger.height()?(trigger.css({height:"auto","max-height":"inherit"}),autoHeight=trigger.height(),trigger.height(0).animate({height:autoHeight},{duration:250,complete:function(){trigger.height("auto")}})):trigger.animate({height:0},{duration:250})},Gumby.switch=function(trigger){var autoHeight;0===trigger.height()&&(trigger.css({height:"auto","max-height":"inherit"}),autoHeight=trigger.height(),trigger.height(0).animate({height:autoHeight},{duration:250,complete:function(){trigger.height("auto")}}))},Gumby.addInitalisation("toggles",function(all){$(".toggle").each(function(){var $this=$(this);if($this.data("isToggle")&&!all)return!0;$this.data("isToggle")&&all&&$this.trigger("gumby.initialize"),$this.data("isToggle",!0),new Toggle($this)})}),Gumby.addInitalisation("switches",function(all){$(".switch").each(function(){var $this=$(this);return!(!$this.data("isSwitch")||all)||($this.data("isSwitch")&&all?($this.trigger("gumby.initialize"),!0):($this.data("isSwitch",!0),void new Switch($this)))})}),Gumby.UIModule({module:"toggleswitch",events:["initialize","trigger","onTrigger"],init:function(){Gumby.initialize("switches"),Gumby.initialize("toggles")}})}(jQuery);

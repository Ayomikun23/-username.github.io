"use strict";(self.webpackChunkpmw=self.webpackChunkpmw||[]).push([[238],{59580:(e,t,n)=>{n.d(t,{Z:()=>c});var o=n(67294),a=n(45697),l=n.n(a),r=n(90417);const s=({btnIcon:e,btnText:t,direction:n,className:a,textClasses:l,href:s,onClick:c,ariaLabel:i,disabled:d,isLoading:m,btnRef:p})=>{const u=o.createElement(o.Fragment,null,m?o.createElement(r.p0,{classes:"dotted-btn-loader"}):o.createElement("i",{className:`icon ${e}`}),o.createElement("span",{className:`dotted-icon-btn-text ${l} ${t?"":"_hidden"}`}," ",t)),f=""!==i?i:t,g=`-${n} ${a} ${d?"-disabled":""}`;return s?o.createElement("a",{className:`dotted-icon-button ${g}`,href:s,"aria-label":f,title:t},u):o.createElement("button",{ref:p,className:`dotted-icon-button ${g}`,"aria-label":f,onClick:c,disabled:d},u)};s.propTypes={btnIcon:l().string.isRequired,btnText:l().string.isRequired,direction:l().string,className:l().string,textClasses:l().string,href:l().string,ariaLabel:l().string,disabled:l().bool,onClick:l().func,isLoading:l().bool,btnRef:l().object},s.defaultProps={direction:"",className:"",textClasses:"body-s",href:"",ariaLabel:"",disabled:!1,isLoading:!1,btnRef:null};const c=s},776:(e,t,n)=>{n.d(t,{Bj:()=>d,SN:()=>g,_Q:()=>c});var o=n(51481),a=n(31952),l=n(13572);const r=["ttf","otf"];let s=[];const c=e=>{(0,a.NJ)(e,i,y)},i=(e,t)=>{const n=g(e);n.length!==e.length&&w(),n.length>0&&PMW.openUploadFontModal({files:n,onFontUploaded:t})},d=async(e,t)=>{const n=e.length;for(let o=0;o<n;o++){l.Z.emit(l.F.FONT_UPLOAD_START,{fontsProcessed:o+1,totalNumberOfFonts:n});try{let n=new FormData;n.append("Font",e[o]);const a=await f(n);m(a,t)}catch(e){u(e)}}s.length>0&&u(`error in processing fonts :: error details ${s}`),s=[],l.Z.emit(l.F.FONTS_UPLOAD_END)},m=(e,t)=>{e.err?p(e):(PMW.redux.store.dispatch((0,o.yW)(e)),"function"==typeof t&&t(e.fontFamily,e.name))},p=e=>{"premium"===e.err?PMW.showPremiumOnlyFeatureDialog(PMW.PREMIUM_ONLY_FEATURE_NAME_CUSTOM_FONT):s.push(e.name)},u=e=>{PMW.log(e),PMW.openErrorModal({message:i18next.t("pmwjs_upload_error")})},f=e=>PMW.write(PMW.util.site_url("font/upload"),e,null,"json",{timeout:72e5,xhr:a.Iw.bind(void 0,"userFontUpload"),cache:!1,processData:!1,contentType:!1}),g=e=>{let t,n;const o=[];for(let a of e)t=a.name,n=t.split(".")[t.split(".").length-1].toLowerCase(),r.includes(n)&&o.push(a);return o},w=()=>{PMW.openErrorModal({message:i18next.t("pmwjs_invalid_font_file_error")})},y=()=>{PMW.openErrorModal({message:i18next.t("pmwjs_invalid_font_file_error")})}},95894:(e,t,n)=>{n.d(t,{Z:()=>_});var o=n(67294),a=n(94275),l=n(57790),r=n(31259),s=n(6341),c=n(99111),i=n(97707),d=n(90417),m=n(93384),p=n(19984),u=n(9732),f=n(12092),g=n(11811),w=n(48034),y=n(50746),b=n(85444),F=n(10106),O=n(17570),v=n(13780);const E="VkZ1BwUt4ghVmXSevLAe";var S=n(36131);const h=e=>{var{showSmallDropdownHeader:t=!1}=e,n=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(n[o[a]]=e[o[a]])}return n}(e,["showSmallDropdownHeader"]);const r=(0,S.C)((e=>{var t;return null!==(t=e.brands.activeBrandId)&&void 0!==t?t:""})),d=(0,S.C)((e=>e.brands.brands)),m=(0,S.C)((e=>e.brands.brandsLoadingState)),p=(0,S.C)((e=>e.brands.brandContent)),u=p[r]?p[r][n.brandAsset].loaded:0,h=(0,S.T)(),N=e=>d.map((t=>({id:t.brandId,text:t.name,isSelected:t.brandId===r,type:F.A.DEFAULT_3,listSize:e?F.z.MEDIUM:F.z.SMALL,onClick:()=>{var n;n=t.brandId,h((0,s.iU)({newActiveBrandId:n})),e&&h((0,O.Mr)(v.Fp.MORE_OPTIONS_MODAL))}})));return(0,i.xS)(d)||(0,i.g4)(d,m)&&n.isSmallSection?o.createElement("div",{className:`flexbox ${E}`},o.createElement("div",{className:"flex-row-align-center spacing-p-r-1"},o.createElement(l.J,{icon:"icon-brands",size:f.ZG.SIZE_ICON_16,className:"spacing-p-r-1"}),o.createElement(c.xv,{val:(0,i.g4)(d)?window.i18next.t("pmwjs_brand_kits"):(0,i.nj)(d,r),size:c.JB.XSMALL,bold:!0})),(0,a.zP)()?"":o.createElement(l.J,{icon:"icon-crown",className:"color-premium",size:f.ZG.SIZE_ICON_20})):(0,i.ou)(d)?o.createElement(g.L,{className:"Q3v9R4mw9R3ObVPpG7n7",selector:o.createElement(w.L,{isBold:!0,isLoading:2===u,textClassName:E,icon:"icon-brands GrKr05nij81zPpWZBXzE",text:(0,i.nj)(d,r)}),position:b.H2.FIXED,popup:o.createElement(y.h,{items:N(!1),className:"spacing-m-0"}),popUpHasCustomWidth:!0,alignment:b.dO.BOTTOM_START,popupClassName:`NZPt7Wrlf8RxUZNLn77B ${t?"eE7knk0yuse23tVGGVkg":""} border-s-standard`,maxHeight:t?250:void 0,showModalForSmallScreen:!n.isSmallSection,modalTitle:window.i18next.t("pmwjs_select_a_brand"),modalContent:o.createElement(y.h,{items:N(!0),className:"spacing-m-0"})}):null};var N=n(92576);const _=function(e){var{className:t="",showSmallDropdownHeader:n=!1}=e,g=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(n[o[a]]=e[o[a]])}return n}(e,["className","showSmallDropdownHeader"]);const w=(0,S.C)((e=>e.brands.brands)),y=(0,S.C)((e=>{var t;return null!==(t=e.brands.activeBrandId)&&void 0!==t?t:""})),b=(0,S.C)((e=>e.brands.brandsLoadingState)),F=(0,S.C)((e=>e.brands.brandContent)),O=F[y]?F[y][g.brandAsset].loaded:0,v=(0,S.T)(),E=()=>{(0,a.zP)()?(0,r.H)((()=>v((0,s.tF)()))):v((0,N.Y$)(p.kR.LOADED))};(0,o.useEffect)((()=>{(0,i.h6)(b,E)}),[]);const _=()=>{switch(g.brandAsset){case p.He.LOGOS:return 1;case p.He.COLORS:return 2;case p.He.FONTS:default:return 3}},x=()=>{(0,r.H)((()=>v((0,s.eY)({brandId:y,brandContentType:_()}))))};(0,o.useEffect)((()=>{(0,i.h6)(O,x)}),[O]);const C=()=>g.brandAsset===p.He.LOGOS?o.createElement("img",{className:"spacing-p-t-2",src:window.PMW.util.asset_url("images/postermaker/logos-loading.png"),alt:"logos"}):o.createElement("div",{className:"flex-center "+(g.isSmallSection?" spacing-m-t-6":"_full-width _full-height")},o.createElement("div",null,o.createElement(d.p0,{size:g.isSmallSection?d.MN.DEFAULT:d.MN.LARGE}))),I=()=>{window.location.href=window.PMW.util.site_url("posters/mine#/brands")},j=e=>{switch(e){case p.He.LOGOS:return window.i18next.t("pmwjs_upload_a_logo");case p.He.COLORS:return window.i18next.t("pmwjs_add_a_color");case p.He.FONTS:return window.i18next.t("pmwjs_add_a_font");default:return window.i18next.t("pmwjs_add_a_brand")}},P=e=>o.createElement("div",{className:"Y6yjtjMT6FoZ3KM1L2Yk"},o.createElement(u._,{btnText:j(e),btnIcon:"icon-upload color-standard-text",direction:"horizontal",textClasses:"body-xs",className:"spacing-m-t-3 _full-width",onClick:()=>{g.onAddBrandAsset(I)}}));return b===p.kR.NOT_LOADED?null:b===p.kR.LOADING?C():!(0,a.zP)()||(0,i.m_)(b)&&(0,i.g4)(w,b)?g.isSmallSection?o.createElement("div",{className:"spacing-p-t-6 spacing-p-b-6"},o.createElement(h,{showSmallDropdownHeader:n,brandAsset:g.brandAsset,isSmallSection:g.isSmallSection}),P()):(0,a.zP)()?o.createElement("div",{className:"flex-column-align-center flex-content-center _full-height _full-width"},o.createElement(l.J,{icon:"icon-brands",type:f.e1.FLAT,size:f.ZG.SIZE_ICON_32,shape:f.q0.CIRCLE}),o.createElement(c.xv,{className:"spacing-p-t-5",val:window.i18next.t("pmwjs_no_brand_message"),size:c.JB.SMALL}),o.createElement(m.zx,{customClasses:"spacing-m-t-5",text:window.i18next.t("pmwjs_create_a_brand"),type:m.wD.SECONDARY,icon:"icon-plus",onClick:()=>{g.onAddBrandAsset(I)}})):o.createElement("div",{className:"flex-column-align-center flex-content-center _full-height _full-width"},o.createElement("div",{className:"flex-center radius-50 EQU1XhARbnWBDlX48MaC"},o.createElement(l.J,{icon:"icon-crown",type:f.e1.FLAT,size:f.ZG.SIZE_ICON_32,shape:f.q0.NONE})),o.createElement(c.xv,{className:"spacing-p-t-5",val:window.i18next.t("pmwjs_upgrade_account_for_brands"),size:c.JB.SMALL}),o.createElement(m.zx,{customClasses:"spacing-m-t-5",text:window.i18next.t("pmwjs_upgrade"),type:m.wD.SECONDARY,onClick:()=>{g.onAddBrandAsset(I)}})):o.createElement("div",{className:`${t}`},o.createElement(h,{showSmallDropdownHeader:n,brandAsset:g.brandAsset}),(0,i.Vd)(y,F)?C():(0,i.vR)(y,F,g.brandAsset)?P(g.brandAsset):g.children)}},18371:(e,t,n)=>{n.d(t,{_:()=>fe});var o=n(67294),a=n(68736),l=n(99111),r=n(57790),s=n(12092);const c={"-large":"VM8CF6HYClClnwuWxDkJ",fontHeading:"GHe5LkMkmj8o4_TyOyOj",icon:"zJrRPwm7itTNftcvuYDW"};var i=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(n[o[a]]=e[o[a]])}return n};function d(e){var{className:t="",showPremiumIcon:n=!1}=e,a=i(e,["className","showPremiumIcon"]);return o.createElement("div",{className:`${c.fontHeading} flex-row-justify-between`},o.createElement(l.xv,{val:a.heading,className:`${t}`,size:l.JB.XSMALL,bold:!0}),n?o.createElement(r.J,{icon:"icon-crown",size:s.ZG.SIZE_ICON_20,className:c.icon}):null)}var m=n(9732),p=n(776),u=n(96593);const f={"-large":"nJRBo2j_bPLEK6Y5Pu1A",deleteIcon:"mqasCm7UtmbfdBED0frp",deleteConfirmIcon:"z9D4imrNioIhfG2cKLIA",cancelIcon:"YdefddI4iydw0nLhJlFb"};var g=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(n[o[a]]=e[o[a]])}return n};function w(e){var t=g(e,[]);const[n,a]=(0,o.useState)(!1),l=()=>["spacing-p-3","hover-transition-all","radius-2","spacing-m-l-1"].join(" ");return o.createElement("div",null,n?o.createElement("div",{className:"flexbox"},o.createElement(r.J,{icon:"icon-check",size:s.ZG.SIZE_ICON_24,onClick:t.onDeleteConfirm,className:`color-danger-100 ${f.deleteConfirmIcon} ${l()}`}),o.createElement(r.J,{icon:"icon-close",size:s.ZG.SIZE_ICON_24,onClick:()=>a(!1),className:`${f.cancelIcon} ${l()}`})):o.createElement(r.J,{icon:"icon-delete",onClick:()=>a(!0),className:`color-danger-100 ${f.deleteIcon} ${l()}`,size:s.ZG.SIZE_ICON_24}))}var y=n(90417),b=n(48993);const F={"-large":"UpU1FfLGyUOD7HU0fB6i",fontItem:"s0sw0M64m9DJj7GfDe7c",fontImage:"aodb0OOR6_SQ06rOTAZK",fullImage:"duCEGYZFyzcLdlUwQ6Lw",imageWithActions:"F3DfjdovCvGYMR1inX2A",selectedItem:"Gk2uiJB81E7DgBIlhhP6",selectedFontImage:"jenrrlPtT0g4oCrjxBBL"};var O=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(n[o[a]]=e[o[a]])}return n};const v={small:{minWidth:0,maxWidth:155},large:{minWidth:156}};function E(e){var{id:t="",className:n="",isSelected:a=!1,isLoading:l=!1,onClick:c=(()=>{}),onDelete:i=(()=>{}),showDeleteActions:d=!1}=e,m=O(e,["id","className","isSelected","isLoading","onClick","onDelete","showDeleteActions"]);const p=(0,o.useRef)(null),f=(0,b.D)(p,v),g=()=>window.PMW.util.repoURL(`fonts/${m.fontName}.png?`,(0,u.wA)());return o.createElement("li",{className:"flexbox spacing-m-t-1 spacing-m-b-1"},o.createElement("div",{id:t,onClick:c,className:`${F.fontItem} radius-4 flex-row-justify-between align-items-center hover-transition-all spacing-p-2 ${a?F.selectedItem:""} ${n}`},o.createElement("img",{ref:p,className:`${F.fontImage} ${a?F.selectedFontImage:""} ${d||a?F.imageWithActions:F.fullImage}`,src:`${f.small?"HanWangKanTan"===m.fontName||"StintUltraCondensed"===m.fontName?g():window.PMW.util.repoURL(`fonts/${m.fontName}_short.png?`,(0,u.wA)()):g()}`,alt:""}),l&&a?o.createElement(y.p0,null):null,a&&!l?o.createElement(r.J,{icon:"icon-check",size:s.ZG.SIZE_ICON_24}):null),d?o.createElement(w,{onDeleteConfirm:i}):null)}var S=n(36131),h=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(n[o[a]]=e[o[a]])}return n};function N(e){var{className:t="",isUserUploadedFontList:n=!1,onDeleteFontItem:a=(()=>{}),onSelectFontFamily:l=(()=>{}),selectedFontFamily:r="",isSelectedFontLoading:s=!1}=e,c=h(e,["className","isUserUploadedFontList","onDeleteFontItem","onSelectFontFamily","selectedFontFamily","isSelectedFontLoading"]);const i=(0,S.C)((e=>e.fontSelector.selectedFont));return o.createElement("ul",{className:`${t} spacing-m-0`},c.fontNames?c.fontNames.map((e=>{return o.createElement(E,{showDeleteActions:n,onDelete:()=>{a(e)},onClick:()=>{l(e)},key:e.idfont,fontName:e.fontFamily,isSelected:(t=e.fontFamily,r?r===t:t===i.fontFamily),isLoading:s});var t})):null)}var _=n(94275),x=n(63973),C=n(25154),I=n(49369),j=n(51481);const P={"-large":"fh_8gGpu5Y4yjg3TMcjn",uploadContainer:"u66qmifZr4drQISHtSnZ",uploadedButton:"fCRYpM6kRljLBYN41g39"};var L=function(e,t,n,o){return new(n||(n=Promise))((function(a,l){function r(e){try{c(o.next(e))}catch(e){l(e)}}function s(e){try{c(o.throw(e))}catch(e){l(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,s)}c((o=o.apply(e,t||[])).next())}))},A=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(n[o[a]]=e[o[a]])}return n};function M(e){var{className:t="",selectedFontFamily:n="",isSelectedFontLoading:l=!1,onSelectFontFamily:r=(()=>{}),onFileUploadedCallback:s=(()=>{})}=e,c=A(e,["className","selectedFontFamily","isSelectedFontLoading","onSelectFontFamily","onFileUploadedCallback"]);const i=(0,o.useRef)(null),u=(0,S.C)((e=>e.fontSelector.userFonts)),f=(0,S.T)(),[g,w]=(0,o.useState)(!1),y=()=>(0,_.Pc)()&&(0,_.rz)(),b=e=>{y()?(s(e,(e=>{const t=(0,a.bn)();if(t)for(const n of t)if(n.fontFamily===e)return n})(e)),w(!1),(0,C.G8)(C.Y4.UPLOAD_FONT)):window.PMW.showPremiumOnlyFeatureDialog(window.PMW.PREMIUM_ONLY_FEATURE_NAME_CUSTOM_FONT)},F=e=>L(this,void 0,void 0,(function*(){w(!0),yield(0,p.Bj)(e,b)})),O=e=>L(this,void 0,void 0,(function*(){return window.PMW.readLocal("font/removeUserFont",{ff:e}).then((()=>{f((0,j.G7)(e))}))}));return o.createElement("div",{className:`${t} ${P.uploadContainer} flex-v-row spacing-p-t-4 spacing-p-b-3`},o.createElement(d,{heading:window.i18next.t("pmwjs_uploaded"),showPremiumIcon:!y()}),o.createElement("div",{className:"_hidden flexbox"},o.createElement("input",{ref:i,type:"file",id:"file-font-upload",className:"hidden flex-1",name:"Filedata",multiple:!0,accept:".ttf, .otf",onChange:e=>{if(i&&i.current){const t=(e=>{const t=(0,p.SN)(e.target.files);return t.length!==e.target.files.length?((0,I.y)({message:window.i18next.t("pmwjs_error_message")}),null):t})(e);t&&(e=>{(0,x.j)({onAgree:()=>F(e)})})(t)}return null}})),o.createElement(m._,{isLoading:g,disabled:g,onClick:()=>{y()?i&&i.current&&i.current.click():window.PMW.showPremiumOnlyFeatureDialog(window.PMW.PREMIUM_ONLY_FEATURE_NAME_CUSTOM_FONT)},textClasses:"body-xs color-supplementary-text capitalize-sentence",direction:"horizontal",className:`${P.uploadedButton} spacing-m-t-2`,btnIcon:"icon-upload-1 font-icon-upload",btnText:window.i18next.t("pmwjs_upload_font")}),u?o.createElement(N,{selectedFontFamily:n,isSelectedFontLoading:l,onSelectFontFamily:r,onDeleteFontItem:e=>{O(e.fontFamily),c.onDeleteFontItem(e)},isUserUploadedFontList:!0,className:"spacing-m-t-2",fontNames:u}):null)}const k={"-large":"HreehOk_cdZMTJF4QXvg",container:"IcBReWz2vjfLSNGZhhbf",fontImage:"_hCewBf5rP6YfKXwoLbk",fontImgContainer:"KSC1Q4673o3ouUvUlJF5"};var D=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(n[o[a]]=e[o[a]])}return n};function B(e){var t=D(e,[]);return o.createElement("div",{className:`${k.container} radius-4 bg-danger-10 flex-v-row spacing-p-3 spacing-m-t-3`},o.createElement("div",{className:`${k.fontImgContainer} flex-row-justify-between flex-items-center`},o.createElement("img",{loading:"lazy",className:`${k.fontImage} `,src:`${window.PMW.util.repoURL(`fonts/${t.fontFamily}.png?`,(0,u.wA)())}`,alt:""}),o.createElement(r.J,{icon:"icon-exclamation-triangle",size:s.ZG.SIZE_ICON_24,className:"color-danger-dark"})),o.createElement(l.xv,{className:"spacing-m-t-3 color-danger-dark",size:l.JB.XSMALL,val:window.i18next.t("pm_font_not_supported_description")}))}var T=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(n[o[a]]=e[o[a]])}return n};function U(e){var{className:t="",onSelectFontFamily:n=(()=>{}),selectedFontFamily:l=""}=e,r=T(e,["className","onSelectFontFamily","selectedFontFamily"]);const s=(0,S.C)((e=>e.fontSelector.pmwFonts)),c=(0,S.C)((e=>e.fontSelector.userFonts)),i=e=>{if(!s)return null;for(const t of s)if(t.fontFamily===e)return t;return null},m=e=>{if(!c)return null;for(const t of c)if(t.fontFamily===e)return t;return null};return o.createElement("div",{className:t},o.createElement(d,{heading:window.i18next.t("pmwjs_on_my_design")}),""===l||(0,a.of)(l)?null:o.createElement(B,{fontFamily:l}),o.createElement(N,{selectedFontFamily:l,onSelectFontFamily:n,fontNames:(()=>{const e=[];for(const t of r.fontsInDesign){const n=i(t);n&&e.push(n);const o=m(t);o&&e.push(o)}return e})()}))}function W({className:e="",showHeading:t=!0,onSelectFontFamily:n=(()=>{}),showUserFonts:a=!1,selectedFontFamily:l="",isSelectedFontLoading:r=!1}){const s=(0,S.C)((e=>e.fontSelector.pmwFonts)),c=(0,S.C)((e=>e.fontSelector.userFonts));return o.createElement("ul",{className:`spacing-m-0 ${e}`},t?o.createElement(d,{heading:window.i18next.t("pmwjs_all_fonts")}):null,(()=>{if(null===s)return null;if(a){const e=c&&s?null==c?void 0:c.concat(s):c;return e?o.createElement(N,{onSelectFontFamily:n,isSelectedFontLoading:r,fontNames:e,selectedFontFamily:l}):null}return o.createElement(N,{onSelectFontFamily:n,isSelectedFontLoading:r,fontNames:s,selectedFontFamily:l})})())}var R=n(65179),Z=n(79490);const z={"-large":"MD5GGpQWApFhIjjXYg65",fontButtonContainer:"VhufQat4vcPFyR0kKl3P",selectedButtonContainer:"runnWXf6JRgW8wf6qmth",selectedFontButtonImage:"_ZkYuSqWxVxsK2ObTyrN"};var G=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(n[o[a]]=e[o[a]])}return n};function H(e){var{id:t="",className:n="",onClick:a=$.noop,isSelected:l=!1}=e,r=G(e,["id","className","onClick","isSelected"]);return o.createElement("li",{onClick:a,id:t,className:`${z.fontButtonContainer} ${n} ${l?z.selectedButtonContainer:""} flex-center hover-transition-all spacing-p-0`},o.createElement("img",{src:r.imageUrl,alt:"",className:`${l?z.selectedFontButtonImage:""}`}))}var J=n(74221);const Y={"-large":"cnuIY_ucWxJA2EGUacN6",section:"F05vucy3dha1xkXGhIjj"};var X=function(e,t,n,o){return new(n||(n=Promise))((function(a,l){function r(e){try{c(o.next(e))}catch(e){l(e)}}function s(e){try{c(o.throw(e))}catch(e){l(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,s)}c((o=o.apply(e,t||[])).next())}))};function V({className:e="",selectedFontFamily:t="",isSelectedFontLoading:n=!1,onSelectFontFamily:a=(()=>{})}){const[l,r]=(0,o.useState)(),s=(0,S.C)((e=>e.fontSelector.pmwFonts)),c=(0,S.C)((e=>e.fontSelector.userFonts)),[i,m]=(0,o.useState)(),[p,f]=(0,o.useState)("");(0,o.useEffect)((()=>{g()}),[]);const g=()=>X(this,void 0,void 0,(function*(){try{const e=yield window.PMW.readLocal("font/getFontCategories");r(e)}catch(e){window.PMW.openErrorModal({message:window.i18next.t("pmwjs_general_ajax_error")})}})),w=e=>!(!i||-1===e.category.indexOf(i.name));return o.createElement("div",{className:`flex-v-row spacing-m-t-4 ${e}`},o.createElement(R.E,{onInput:f,onFocus:()=>m(null)}),p?null:o.createElement("ul",{className:`${Y.section} spacing-m-l-0 spacing-m-r-0 spacing-m-b-3 spacing-m-t-3`},(()=>{if(l){const e=[];return l.map((t=>{var n;return e.push(o.createElement(H,{key:t.idfontcategory,isSelected:t===i,onClick:()=>{(e=>{m(e)})(t)},imageUrl:(n=t.idfontcategory,window.PMW.util.repoURL(`fonts/${n}.png?`,(0,u.bE)())),id:t.idfontcategory})),e})),e}return null})()),i||p?o.createElement("div",{className:"spacing-m-t-3"},o.createElement(d,{heading:window.i18next.t("pmwjs_search_results")}),(()=>{let e=[];return i&&(e=null==s?void 0:s.filter(w)),p&&(e=(()=>{if(!s)return[];let e=s;return c&&(e=[...c,...e]),new J.Z(e,{includeScore:!0,includeMatches:!0,threshold:.2,keys:["name"]}).search(p).map((e=>e.item))})()),o.createElement(N,{selectedFontFamily:t,onSelectFontFamily:a,isSelectedFontLoading:n,fontNames:e})})()):null)}var K=n(97707),Q=n(35690);const q={small:{minWidth:0,maxWidth:250},large:{minWidth:251}},ee=function(e){var t=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(n[o[a]]=e[o[a]])}return n}(e,[]);const n=(0,S.C)((e=>{var t;return null!==(t=e.brands.activeBrandId)&&void 0!==t?t:""})),a=(0,S.C)((e=>e.brands.brandContent)),l=(0,S.C)((e=>e.brands.fonts)),r=(0,o.useRef)(null),s=(0,b.D)(r,q);return o.createElement("div",{className:"_full-width spacing-p-t-4 nlKlc1KJWdAk2HdmovSx",ref:r},a[n].fonts.ids.map((e=>{return n=l[e],o.createElement(Q.L,{className:"font-item flex-center radius-4 W9jDJXb3RNSTc5L9MOA3",onClick:e=>{((e,n)=>{$(e.target).hasClass("disabled")||((0,C.G8)(C.Y4.USE_BRAND_FONT),t.onFontItemClicked(e,n))})(e,n)},key:n.idbrandFont},o.createElement("img",{className:"flex-center",src:(0,K.wY)(n.idbrandFont,s.small?"_short":void 0),alt:n.fontFamily}));var n})))};var te=n(19984),ne=n(33998);const oe={"-large":"TPIGVtBC9bL0DV5kCNZw",container:"GOZoVXlAJ6M9y5Pxgkd0",divider:"sXrFoOGn5yD1TNwd_GQH"};var ae=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(n[o[a]]=e[o[a]])}return n};function le(e){var{onBrandItemClicked:t=(()=>{}),showSmallDropdownForBrands:n=!1}=e,a=ae(e,["onBrandItemClicked","showSmallDropdownForBrands"]);return o.createElement("div",{className:`${oe.container}`},o.createElement(ne.Z,{isSmallSection:!0,className:"spacing-p-b-6 spacing-p-t-6",brandAsset:te.He.FONTS,onAddBrandAsset:()=>{a.onAddBrandAsset()},showSmallDropdownHeader:n},o.createElement(ee,{onFontItemClicked:(e,n)=>{t(n)}})),o.createElement("div",{className:oe.divider}))}var re=n(96420);const se={"-large":"jf2FZpl6mK9u8zPbEADj",container:"SsDYm1g42Fl6BBh8zpqU",scrollButton:"zSI6otRHEWrRTi1MCJw2"};var ce=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(n[o[a]]=e[o[a]])}return n};const ie=300;function de(e){var{id:t="",className:n="",scrollTopOffset:a=ie}=e,c=ce(e,["id","className","scrollTopOffset"]);const i=(0,o.useRef)(null),{scrollTop:d}=(0,re.Z)(i);return o.createElement("div",{id:t,className:`${n} ${se.container}`,ref:i},c.children,d>=a?o.createElement("div",{onClick:()=>{i&&i.current&&i.current.scrollTo({top:0,behavior:"smooth"})},className:`radius-round flex-row-justify-center flex-items-center color-white spacing-p-t-2 spacing-p-b-2 spacing-p-r-4 spacing-p-l-4 ${se.scrollButton}`},o.createElement(r.J,{icon:"icon-arrow-top",className:"spacing-m-r-1",size:s.ZG.SIZE_ICON_16}),o.createElement(l.xv,{val:window.i18next.t("pmwjs_font_scroll_to_top"),size:l.JB.XSMALL,bold:!0})):null)}function me({className:e="",script:t="",onSelectFontFamily:n=(()=>{}),selectedFontFamily:l=""}){const r=(0,S.C)((e=>e.fontSelector.pmwFonts));return r&&t?o.createElement("div",{className:e},o.createElement(d,{heading:window.i18next.t("pmwjs_recommended_for",{scriptName:(0,a.Ww)(t)})}),(()=>{if(!r||!t)return null;const e=r.filter((e=>(e=>{for(let n=0;n<e.length;n++)if(e[n].toLowerCase()===t.toLowerCase())return!0;return!1})(e.script)));return o.createElement(N,{selectedFontFamily:l,onSelectFontFamily:n,fontNames:e})})()):null}const pe={"-large":"Xivlgn_u7QNo97LH9GTg",fontSelectorContainer:"BYqK_qskZMcZNr1iOyzm",divider:"FabBNbVHW3vO9vFuj39A"},ue=400;function fe({className:e="",onBrandItemClicked:t=(()=>{}),onBackButtonCallback:n=(()=>{}),onSelectFontFamily:l=(()=>{}),onDeleteFontItem:r=(()=>{}),onFileUploaded:c=(()=>{}),onAddBrandAsset:i=(()=>{}),showDropdownVariant:d=!1,showHeader:m=!1,selectedFontFamily:p="",isSelectedFontLoading:u=!1,fontsInDesign:f=[],showSmallDropdownForBrands:g=!1,showUserFonts:w=!0,scriptForRecommendedFonts:y=""}){const[b,F]=(0,o.useState)(!1);(0,o.useEffect)((()=>{(0,a.z7)().catch((()=>{window.PMW.openErrorModal({message:window.i18next.t("pmwjs_error_message")})}))}),[]);const O=()=>{F(!0)};return o.createElement(Z.s_,{panelHeader:d?null:m?o.createElement(Z.V9,{title:window.i18next.t(b?"Search":"Font"),showCloseButton:!1,showBackButton:!0,backButtonIconSize:s.ZG.SIZE_ICON_20,centerAlignTitle:!0,onBackButton:()=>{b?F(!1):n()},titleClasses:"body-s-bold"}):null,panelContent:o.createElement(de,{scrollTopOffset:ue,className:`${pe.fontSelectorContainer} ${e} `},d?o.createElement(W,{selectedFontFamily:p,isSelectedFontLoading:u,showUserFonts:w,onSelectFontFamily:l,showHeading:!1}):b?o.createElement(V,{isSelectedFontLoading:u,onSelectFontFamily:l,selectedFontFamily:p}):o.createElement(o.Fragment,null,o.createElement(le,{onBrandItemClicked:t,onAddBrandAsset:()=>{i()},showSmallDropdownForBrands:g}),o.createElement(R.E,{className:"spacing-m-t-4 spacing-m-b-3",onFocus:O}),o.createElement(me,{script:y,selectedFontFamily:p,onSelectFontFamily:l,className:"spacing-p-t-3 spacing-p-b-3"}),o.createElement(U,{selectedFontFamily:p,onSelectFontFamily:l,className:"spacing-p-t-4 spacing-p-b-3",fontsInDesign:f}),o.createElement(M,{onFileUploadedCallback:c,onSelectFontFamily:l,onDeleteFontItem:r,className:"spacing-p-t-1 spacing-p-b-1",selectedFontFamily:p,isSelectedFontLoading:u}),o.createElement(W,{selectedFontFamily:p,isSelectedFontLoading:u,onSelectFontFamily:l,className:"spacing-p-t-4"})))})}},96420:(e,t,n)=>{n.d(t,{Z:()=>a});var o=n(67294);const a=(e,t,n=300)=>{const[a,l]=(0,o.useState)(0),r=()=>{var t;e&&e.current&&l(null===(t=null==e?void 0:e.current)||void 0===t?void 0:t.scrollTop)};return(0,o.useEffect)((()=>{var t;return null===(t=null==e?void 0:e.current)||void 0===t||t.addEventListener("scroll",r),()=>{var t;null===(t=null==e?void 0:e.current)||void 0===t||t.removeEventListener("scroll",r)}}),[t]),{isScrolling:a>n,scrollTop:a}}}}]);
//# sourceMappingURL=238.463717aab300b166a9f4.bundle.js.map
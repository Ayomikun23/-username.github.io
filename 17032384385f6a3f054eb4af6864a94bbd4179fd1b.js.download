class EmbeddedParams{constructor(isEmbedded=0,customWidth="",customHeight="",customUnits="",elementsToHide=""){this._isEmbedded=isEmbedded,this._customWidth=customWidth,this._customHeight=customHeight,this._customUnits=customUnits,this._elementsToHide=elementsToHide}get isEmbedded(){return this._isEmbedded}get customWidth(){return this._customWidth}get customHeight(){return this._customHeight}get customUnits(){return this._customUnits}get elementsToHide(){return this._elementsToHide}}
class ModalTopAction{constructor(label,icon,callback,classes){this._label=label,this._icon=icon,this._callback=callback,this._classes=classes}get label(){return this._label}get icon(){return this._icon}get callback(){return this._callback}get classes(){return this._classes}}
class RequestHelper{constructor(requestURL,requestData={},successCallback=null,errorCallback=null){this._requestURL=requestURL,this._requestData=requestData,this._successCallback=successCallback,this._errorCallback=errorCallback}get requestURL(){return this._requestURL}get requestData(){return this._requestData}get successCallback(){return this._successCallback}get errorCallback(){return this._errorCallback}}
class GoogleSSOParamsVO{constructor(doLinkAccount,redirectVO){this._doLinkAccount=doLinkAccount,void 0!==redirectVO&&(this._redirectVO=new SSORedirectHelper(redirectVO._callback,redirectVO._redirect))}initFromVO(vo){this._doLinkAccount=vo._doLinkAccount,this._redirectVO=new SSORedirectHelper(vo._redirectVO._callback,vo._redirectVO._redirect)}get doLinkAccount(){return this._doLinkAccount}get redirectVO(){return this._redirectVO}get localStorageCacheKey(){return"pmw_google_sso_cache_obj"}}
class SavePosterRequestPayloadHelper{constructor(newPosterJSON,oldPosterJSON){this._oldJSON=oldPosterJSON,this._newJSON=newPosterJSON,this._oldGraphicItemsMap=SavePosterRequestPayloadHelper.getGraphicItemMap(this._oldJSON.graphicItems),this._newGraphicItemsMap=SavePosterRequestPayloadHelper.getGraphicItemMap(this._newJSON.graphicItems),this._graphicItemChangesMap={}}get RequestPayload(){let jsonDifference=SavePosterRequestPayloadHelper.getJSONDifference(this._newJSON,this._oldJSON);return jsonDifference.hasOwnProperty("graphicItems")?(this.initializeGraphicItemsChangesMap(),delete jsonDifference.graphicItems,[jsonDifference,this._graphicItemChangesMap]):[jsonDifference]}initializeGraphicItemsChangesMap(){this._graphicItemChangesMap.new=[],this._graphicItemChangesMap.modified={};for(var[key,value]of Object.entries(this._newGraphicItemsMap)){var difference;this._oldGraphicItemsMap.hasOwnProperty(key)?(difference=SavePosterRequestPayloadHelper.getJSONDifference(this._newGraphicItemsMap[key],this._oldGraphicItemsMap[key]))&&Object.keys(difference).length&&(this._graphicItemChangesMap.modified[key]=difference):this._graphicItemChangesMap.new.push(value)}let deleted=[];for(const[key]of Object.entries(this._oldGraphicItemsMap))this._newGraphicItemsMap.hasOwnProperty(key)||deleted.push(key);this._graphicItemChangesMap.deleted=deleted}static getJSONDifference(newJSON,oldJSON){if(!newJSON&&!oldJSON)return null;if(!newJSON)return null;if(!oldJSON)return newJSON;let difference={};for(var[key]of Object.entries(newJSON))oldJSON.hasOwnProperty(key)?"object"==typeof newJSON[key]?JSON.stringify(SavePosterRequestPayloadHelper.sortObjectByKey(newJSON[key]))!==JSON.stringify(SavePosterRequestPayloadHelper.sortObjectByKey(oldJSON[key]))&&(difference[key]=newJSON[key]):newJSON[key]!==oldJSON[key]&&(difference[key]=newJSON[key]):difference[key]=newJSON[key];return difference}static sortObjectByKey(object){return null==object?{}:Array.isArray(object)?object.sort():Object.keys(object).sort().reduce((obj,key)=>(obj[key]=object[key],obj),{})}static compareValues(valueA,valueB){return typeof valueA==typeof valueB&&(Array.isArray(valueA)?SavePosterRequestPayloadHelper.sortObjectByKey(valueA):void 0)}static compareObjects(objectA,objectB){if(Object.keys(objectA).length!==Object.keys(objectA).length)return!1;for(var[key]of Object.keys(objectA)){if(!objectB.hasOwnProperty(key))return!1;if(typeof objectA[key]!=typeof objectB[key])return!1;objectA[key]}return!0}static getGraphicItemMap(graphicItems){let graphicItemMap={};return graphicItems.forEach(graphicItem=>{graphicItemMap[graphicItem.uid]=graphicItem}),graphicItemMap}static getPosterDifference(newPoster,oldPoster){}}
class SSORedirectHelper{constructor(callback,redirect=""){this._callback=callback,this._redirect=redirect}initFromVO(vo){this._callback=vo._callback,this._redirect=vo._redirect}get callback(){return this._callback}get redirect(){return this._redirect}getPostLoginAction(){return""===this._redirect?this._callback:this._redirect}}
var restArgs=function(func,startIndex){return startIndex=null==startIndex?func.length-1:+startIndex,function(){for(var length=Math.max(arguments.length-startIndex,0),rest=Array(length),index=0;index<length;index++)rest[index]=arguments[index+startIndex];switch(startIndex){case 0:return func.call(this,rest);case 1:return func.call(this,arguments[0],rest);case 2:return func.call(this,arguments[0],arguments[1],rest)}for(var args=Array(startIndex+1),index=0;index<startIndex;index++)args[index]=arguments[index];return args[startIndex]=rest,func.apply(this,args)}};const getErrorAjaxResponse=(response,uri,data)=>{if("success"===response.status)return response.data;let details="";response.message&&(details+=" Error Message: "+response.message),response.data&&(details+=" Error data: "+JSON.stringify(response.data));const error=new Error(response.message||"");return error.code=response.code,error.data=response.data,error.status=response.status,error.detail="Failed to write "+JSON.stringify(data)+" to url: "+PMW.util.site_url(uri)+"."+(details||""),error},commChannelToSW="core-sw-channel";"serviceWorker"in navigator&&window.addEventListener("load",function(){let pathToServiceWorker="/serviceWorker.js";window.location.href.includes("/pmw/")&&(pathToServiceWorker="/pmw"+pathToServiceWorker),navigator.serviceWorker.register(pathToServiceWorker).catch(err=>console.log("service worker not registered",err));let isPWA=PMW.isPWA(),isLocal=PMW.isLocal();const broadcast=new BroadcastChannel(commChannelToSW);broadcast.onmessage=event=>{"get_isLocal"===event.data.type&&broadcast.postMessage({type:"isLocal",isLocal:isLocal}),"get_isPWA"===event.data.type&&broadcast.postMessage({type:"isPWA",isPWA:isPWA})}});const MODAL_ANIMATION_TYPE_OPEN="open",MODAL_ANIMATION_TYPE_CLOSE="close",LONG_AJAX_CALL_TIMEOUT=18e5,NUMBER_FORMAT_TYPE_CURRENCY="currency",NUMBER_FORMAT_PART_TYPE_CURRENCY="currency",CURRENCY_FORMAT_MAX_FRACTION_DIGITS_NO_DECIMALS=0,CURRENCY_FORMAT_MAX_FRACTION_DIGITS_WITH_DECIMALS=2;function addLocalOnlyParamsToAjax(ajaxOpts){PMW.isLocal()&&(ajaxOpts.xhrFields={withCredentials:!0},ajaxOpts.crossDomain=!0,ajaxOpts.headers={"X-Requested-With":"XMLHttpRequest"})}"undefined"==typeof PMW&&(window.PMW={}),PMW.mergePMW=function(target,source){for(var key in source)source.hasOwnProperty(key)&&void 0===target[key]&&(target[key]=source[key])},PMW.mergePMW(PMW,{VERSION:1,SERVER_ROOT:"",BASE_URL:"",FB_APP_ID:"",GOOGLE_APP_ID:"",FB_PERMISSIONS:"email",TRACKING_COOKIE_EXPIRY:1095,ELIGIBLE_COUNTRY_CODE_COOKIE_EXPIRY:365,enableGTM:!0,enableGATracking:!0,enableOnlineAdsTracking:!0,POSTERBUILDER:"PosterBuilder",sharingAfterAction:"",click:"vclick",modals:[],SUBSCRIPTION_PURCHASE_TRACKING_CACHE_KEY:"pmw_subscription_purchase",queuedOpenModal:null,DEFAULT_CACHE_EXPIRY:2592e5,CACHE_EXPIRY_ONE_HOUR:36e5,MOBILE_SCREEN_BREAKPOINT:480,TABLET_SCREEN_BREAKPOINT:780,cacheNamespace:"",currentAjaxRequest:{},fallbackCache_:{},accessDeniedPages:["blocked"],anonUserId_:"",freeGettyContentForPremiumUsers:null,csrfSourceCookie:0,csrfSourceCookieAfterAjaxRequest:1,csrfSourceAjaxRequestResponse:2,formDataType:0,objectDataType:1,stringDataType:2,indexPage:"index.php",defaultLanguage:"en",languagesSupportedAsUrlSubfolders:["pl"],areSubdomainToSubfolderAjaxParamsNeeded:!0,shouldSubdomainOriginBeCheckedForRedirects:!0,util:{animationEndEvents:function(){let t,el=document.createElement("fakeelement");var animations={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"};for(t in animations)if(void 0!==el.style[t])return animations[t]}(),transitionEndEvents:function(){var t,el=document.createElement("fakeelement"),transitions={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(t in transitions)if(void 0!==el.style[t])return transitions[t]}(),isInBuilder:function(){return-1!==location.href.indexOf("/posterbuilder/")},isRedirectedFromGoogleOAuth:function(){return""!==this.getOAuthRedirectedValue("id_token")},getOAuthRedirectedValue:function(key){var value="?"+location.href.substring(location.href.indexOf("#")+1),value=this.getQueryStringValue(key,value);return"state"===key?JSON.parse(value):value},require:function(test,assetGroupName,hasCss,cb){test?hasCss?PMW.getJsAndCssAssetGroup(assetGroupName,cb):PMW.getJsAssetGroup(assetGroupName,cb):cb()},embedded_site_url:function(u){let embeddedEditorUrlSegment=PMW.util.getEmbeddedURLSegment(),galleryDialogUrlSegment=PMW.util.getGalleryDialogUrlSegment(),urlSegmentToAppend="";return void 0!==embeddedEditorUrlSegment&&0<embeddedEditorUrlSegment.length?urlSegmentToAppend=embeddedEditorUrlSegment:void 0!==galleryDialogUrlSegment&&0<galleryDialogUrlSegment.length&&(urlSegmentToAppend=galleryDialogUrlSegment),this.site_url(u+urlSegmentToAppend)},site_url:function(u=""){var lang=PMW.util.getLanguage();return this.isActiveLanguageSupportedAsUrlSubfolder()&&!PMW.SERVER_ROOT.includes(lang)?PMW.SERVER_ROOT+lang+"/"+u:PMW.SERVER_ROOT+u},asset_url:function(u=""){return PMW.BASE_URL+"assets/"+u},homepage_url:function(){var baseUrl=PMW.BASE_URL,lang=PMW.util.getLanguage();return PMW.util.isActiveLanguageSupportedAsUrlSubfolder()?baseUrl+lang+"/":baseUrl},isActiveLanguageSupportedAsUrlSubfolder(){return PMW.languagesSupportedAsUrlSubfolders.includes(PMW.util.getLanguage())},isLanguageSupportedAsUrlSubfolder(lang){return PMW.languagesSupportedAsUrlSubfolders.includes(lang)},isDefaultLanguage(){return PMW.util.getLanguage()===PMW.defaultLanguage},changeLanguage(targetLang,currentDomain,targetDomain){var currentLang=PMW.util.getLanguage();let redirectUrl=window.location.href;if(PMW.util.isActiveLanguageSupportedAsUrlSubfolder()&&!PMW.util.isLanguageSupportedAsUrlSubfolder(targetLang))return redirectUrl=redirectUrl.replace("/"+currentLang+"/","/"+PMW.indexPage+"/"),void(window.location.href=redirectUrl.replace(window.location.hostname,targetDomain));if(!PMW.util.isActiveLanguageSupportedAsUrlSubfolder()&&PMW.util.isLanguageSupportedAsUrlSubfolder(targetLang)){var segments=window.location.href.split(PMW.indexPage);return redirectUrl=segments[0]+targetLang+segments[1],void(window.location.href=redirectUrl.replace(currentDomain,this.removeLanguageFromDomain(targetDomain,targetLang)))}PMW.util.isActiveLanguageSupportedAsUrlSubfolder()||PMW.util.isLanguageSupportedAsUrlSubfolder(targetLang)?window.location.href=redirectUrl.replace("/"+currentLang+"/","/"+targetLang+"/"):window.location.href=redirectUrl.replace(currentDomain,targetDomain)},removeLanguageFromDomain(domain,lang){let stringToRemove=lang;return domain.includes("beta")||(stringToRemove+="."),domain.replace(stringToRemove,"")},ignoreWindowHistoryUpdateForSubdomain(url){if(!PMW.shouldSubdomainOriginBeCheckedForRedirects)return!1;return["dabeta.postermywall.com","da.localpostermywall.com","da.postermywall.com"].includes(window.location.hostname)&&["postermywall.com/da/","localpostermywall.com/pmw/da/","beta.postermywall.com/da/"].some(subfolderUri=>url.includes(subfolderUri))},getRedirectURLFromHref(locationHref){return locationHref.includes("?redirect=")?locationHref.split("?redirect=")[1]:""},repoURL:function(p,b){var url="https://"+b+"/"+p;return url+=-1===url.indexOf("?")?"?":"&"},getLanguage:function(){return document.documentElement.getAttribute("lang")||PMW.defaultLanguage},getCurrentPagePath:function(){return PMW.util.getPagePath(new URL(window.location.href))},getPagePath:function(url){let separator=this.getPagePathSeparatorToken();this.isLangMismatchWithPMConfig()&&(separator=PMConfig.lang);var regexExp=new RegExp(separator+"(.*)");return url.pathname.match(regexExp)[1]},getControllerFromUrl:function(url){const pagePath=PMW.util.getPagePath(new URL(url)),pagePathUris=pagePath.split("/");return pagePathUris[1]},getMethodFromUrl:function(url){const pagePath=PMW.util.getPagePath(new URL(url)),pagePathUris=pagePath.split("/");return pagePathUris[2]},isLangMismatchWithPMConfig:function(){return"undefined"!=typeof PMConfig&&null!==PMConfig&&void 0!==PMConfig.lang&&PMConfig.lang&&PMW.util.isLanguageSupportedAsUrlSubfolder(PMConfig.lang)&&PMConfig.lang!==PMW.util.getLanguage()},getPagePathSeparatorToken:function(){return PMW.util.isActiveLanguageSupportedAsUrlSubfolder()?PMW.util.getLanguage():PMW.indexPage},addQueryStringParam:function(url,key,value){return url+(-1!=url.indexOf("?")?"&":"?")+encodeURIComponent(key)+"="+encodeURIComponent(value)},getQueryStringValue:function(key,query_string){return void 0!==query_string&&!1!==query_string||(query_string=window.location.search),decodeURIComponent(query_string.replace(new RegExp("^(?:.*[&\\?]"+encodeURIComponent(key).replace(/[\.\+\*]/g,"\\$&")+"(?:\\=([^&]*))?)?.*$","i"),"$1"))},getQueryStringValues:function(){for(var hash,vars={},hashIndex=window.location.href.indexOf("#"),hashes=(0<hashIndex?window.location.href.slice(window.location.href.indexOf("?")+1,hashIndex):window.location.href.slice(window.location.href.indexOf("?")+1)).split("&"),i=0;i<hashes.length;i++)2==(hash=hashes[i].split("=")).length&&(vars[hash[0]]=hash[1]);return vars},getTimeForBenchmark:function(){return"function"==typeof Date.now?Date.now():+new Date},getLocalURLFromFilePath:function(filePath){return filePath.substring(filePath.indexOf("server/")+"server/".length)},isValidEmail:function(v){return/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i.test(v)},isPMWGraphicItemJSON:function(str){let parsedObject;try{parsedObject=JSON.parse(str)}catch(e){return!1}return Object.keys(parsedObject).includes("graphicItems")},setCookie:function(name,value,days,isStrict){void 0===isStrict&&(isStrict=!1);var cookieStr=new Date;cookieStr.setTime(cookieStr.getTime()+24*days*60*60*1e3),cookieStr=name+"="+value+("; expires="+cookieStr.toGMTString())+"; path=/;domain="+PMW.DOMAIN,PMW.isChrome()&&PMW.getBrowserVersion()<79?cookieStr+=";Secure;":cookieStr+=isStrict?" ;SameSite=Strict;Secure;":" ;SameSite=None;Secure;",document.cookie=cookieStr},readCookie:function(name){var nameEQ=name+"=",ca=document.cookie.split(";");for(let i=0;i<ca.length;i++){let c=ca[i];for(;" "===c.charAt(0);)c=c.substring(1,c.length);if(0===c.indexOf(nameEQ))return c.substring(nameEQ.length,c.length)}return null},deleteCookie:function(name){document.cookie=encodeURIComponent(name)+"=deleted; expires="+new Date(0).toUTCString()+";path=/ ;domain="+PMW.DOMAIN},doPost:function(uri,params){PMW.getCsrfToken(function(token_value){var xmlHTTP="csrf_token",csrfMetaTag=document.querySelector('meta[name="data-csrf-name"]');csrfMetaTag&&(xmlHTTP=csrfMetaTag.content),""!==params&&(params+="&"),params+=xmlHTTP+"="+encodeURIComponent(token_value);xmlHTTP=new XMLHttpRequest;xmlHTTP.open("POST",PMW.util.site_url(uri),!0),xmlHTTP.setRequestHeader("Content-type","application/x-www-form-urlencoded"),xmlHTTP.send(params)})},escapeHTML:function(unsafeStr){return unsafeStr.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;").replace(/\'/g,"&#39;").replace(/\//g,"&#x2F;")},isValidURL:function(str){return new RegExp("^(http|https)://((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+\\#]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(str.toLowerCase())},isValidURLSimple:function(url){return/[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_+.~#?&/{2}=]*)/.test(url)},isValidPhoneSimple:function(phoneNumber){return/^(tel:|\+|\d)+[\d\s()x-]+$/.test(phoneNumber)},getClosestByClass:function(elem,className){if(elem.closest)return elem.closest("."+className);for(;elem&&elem!==document;elem=elem.parentNode)if(elem.classList.contains(className))return elem;return null},createRandomId:function(){return Math.random().toString(36).slice(2)},copyProperties:function(source,target,properties){properties.forEach(ppt=>{source.hasOwnProperty(ppt)&&(target[ppt]=source[ppt])})},copyObject:function(toCopy){const copy=toCopy instanceof Array?[]:{};for(var key in toCopy)toCopy.hasOwnProperty(key)&&(copy[key]="object"==typeof toCopy[key]?this.copyObject(toCopy[key]):toCopy[key]);return copy},isEmpty:function(toTest){let isEmpty=!0;for(var key in toTest){isEmpty=!1;break}return isEmpty},replaceAll:function(replaceThis,replaceWith,targetString){return targetString.split(replaceThis).join(replaceWith)},redirectToLoginPage:function(redirectToAfterLogin=null){var loginURL=PMW.util.site_url("authenticate/showlogin");window.location.href=redirectToAfterLogin?PMW.util.addQueryStringParam(loginURL,"redirect",redirectToAfterLogin):loginURL},getCurrencyFormatter:function(currencyCode){return Intl.NumberFormat(navigator.language,{style:NUMBER_FORMAT_TYPE_CURRENCY,currency:currencyCode,maximumFractionDigits:PMW.util.getMaximumFractionDigitsForCurrencyCode(currencyCode)})},getMaximumFractionDigitsForCurrencyCode:function(currencyCode){return PMW.currencyShowsDecimals.includes(currencyCode)?CURRENCY_FORMAT_MAX_FRACTION_DIGITS_WITH_DECIMALS:CURRENCY_FORMAT_MAX_FRACTION_DIGITS_NO_DECIMALS},currencyFormat:function(amount,currencyCode){return this.getCurrencyFormatter(currencyCode).format(amount)},marketingCurrencyFormat:function(amount,currencyCode){const formatter=this.getCurrencyFormatter(currencyCode);var parts=formatter.formatToParts(amount);let isCurrencyAtStart=!1,formattedAmount="",formattedCurrency="";for(let i=0;i<parts.length;i++){var part=parts[i];part.type===NUMBER_FORMAT_PART_TYPE_CURRENCY?(0===i&&(isCurrencyAtStart=!0),formattedCurrency=part.value):formattedAmount+=part.value}return isCurrencyAtStart?'<span class="heading-h4">'+formattedCurrency+'</span><span class="heading-h2">'+formattedAmount+"</span>":'<span class="heading-h2">'+formattedAmount+'</span><span class="heading-h4">'+formattedCurrency+"</span>"}},google:{FEATURES_API_URL:"https://apis.google.com/js/api.js",ACCOUNTS_API_URL:"https://accounts.google.com/gsi/client",DEFAULT_GOOGLE_BUTTON_WIDTH:255,GOOGLE_RENDER_BUTTON_PARAMS:{type:"standard",shape:"rectangle",theme:"filled_blue",text:"continue_with",size:"large",logo_alignment:"left",width:this.DEFAULT_GOOGLE_BUTTON_WIDTH},loadAccountsAPI:function(cb){$.getScript(PMW.google.ACCOUNTS_API_URL,cb)},loadFeaturesAPI:function(cb){$.getScript(PMW.google.FEATURES_API_URL,cb)},initUploadPermissions:function(cb,btn){PMW.google.loadAccountsAPI(function(){try{const client=google.accounts.oauth2.initTokenClient({client_id:PMW.GOOGLE_APP_ID,scope:"https://www.googleapis.com/auth/drive.file",callback:tokenResponse=>{tokenResponse&&tokenResponse.access_token?cb(tokenResponse):PMW.google.onError()}});PMW.onClick(btn,null,function(){client.requestAccessToken(),btn.off(PMW.click)})}catch(e){PMW.google.onError()}})},initDisconnectHandler:function(){$(".js-disconnect-google").click(function(){PMW.write(PMW.util.site_url("user/disconnectGoogleAccount")).done(function(response){"success"===response.status?window.location.href=PMW.util.site_url("user/editprofile"):alert(i18next.t("pmwjs_error_processing_request_try_again"))})})},initLogin:function(cb,initiatedFromBuilder=!1,renderButtonProperties,redirectUrl=""){let redirectAfterSuccess=redirectUrl;""===redirectUrl&&(redirectAfterSuccess=PMW.util.getRedirectURLFromHref(location.href)),PMW.google.loadAccountsAPI(PMW.google.initiateGoogleOAuth_.bind(this,!1,cb,redirectAfterSuccess,initiatedFromBuilder,renderButtonProperties))},initLinking:function(cb){PMW.google.loadAccountsAPI(PMW.google.initiateGoogleOAuth_.bind(this,!0,cb,"",!1,{buttonWidth:PMW.google.DEFAULT_GOOGLE_BUTTON_WIDTH,elementId:"js-google-button"}))},doGoogleLogin_:function(doLinkAccount,redirectVO,initiatedFromBuilder,tokenData){doLinkAccount?PMW.google.link(tokenData.credential,redirectVO,initiatedFromBuilder):PMW.google.connect(tokenData.credential,redirectVO,initiatedFromBuilder)},initiateGoogleOAuth_:function(doLinkAccount,cb,redirectAfterSuccess,initiatedFromBuilder=!1,renderButtonProperties){let redirectURL=PMW.util.site_url("authenticate/showlogin"),redirectObj=new SSORedirectHelper(cb,redirectAfterSuccess);location.href===PMW.util.site_url("user/editprofile")&&(redirectURL=PMW.util.site_url("user/editprofile")),google.accounts.id.initialize({client_id:PMW.GOOGLE_APP_ID,ux_mode:"popup",callback:PMW.google.doGoogleLogin_.bind(this,doLinkAccount,redirectObj,initiatedFromBuilder),login_uri:redirectURL,auto_select:!0});let btnContainer=document.getElementById(renderButtonProperties.elementId),renderButtonParams=PMW.google.GOOGLE_RENDER_BUTTON_PARAMS;renderButtonParams.width=renderButtonProperties.buttonWidth,google.accounts.id.renderButton(btnContainer,renderButtonParams),btnContainer&&btnContainer.classList.contains("-loading")&&(btnContainer.classList.remove("-loading"),btnContainer.classList.add("-loaded"))},resizeGoogleLoginButton:function(buttonWidth,elementId){let btnContainer=document.getElementById(elementId),renderButtonParams=PMW.google.GOOGLE_RENDER_BUTTON_PARAMS;renderButtonParams.width=buttonWidth,"undefined"!=typeof google&&google.accounts.id.renderButton(btnContainer,renderButtonParams)},onError:function(r){let message=i18next.t("pmwjs_error_google_signin");void 0!==r&&void 0!==r.message&&""!==r.message&&(message=r.message),alert(message)},onUserLogin_:function(identityToken,connectFunction,redirectVO,connectWithUserAccountOnly,email,password,initiatedFromBuilder=!1){var params={identityToken:identityToken,email:email=void 0===email?"":email,password:password=void 0===password?"":password,redirectTo:redirectVO.redirect,initiatedFromBuilder:initiatedFromBuilder};PMW.write(PMW.util.site_url(connectFunction),params,function(r){"success"===r.status?PMW.handleSSOAccountSuccessResponse(r,function(){PMW.setLoading(),PMW.write(PMW.util.site_url("user/updateProfilePictureFromGoogle"),{imageURL:r.data.pictureURL},PMW.openEmailOptInModal.bind(this,r.data.action,redirectVO)),PMW.gtm.trackGA4SignupEvent(PMW.gtm.SIGNUP_LABELS.GOOGLE)},function(){PMW.onConnectSuccess(r.data.action,redirectVO,r.data.currentDomain,r.data.newDomain)}):"fail"===r.status?PMW.handleSSOAccountFailResponse(r,function(needEmailForAutoFill){let emailForAutoFill="";"undefined"!==needEmailForAutoFill&&!0===needEmailForAutoFill&&(emailForAutoFill=r.data.email),PMW.showEmailRequiredDialog(PMW.google.onUserLogin_.bind(this,identityToken,connectFunction,redirectVO,connectWithUserAccountOnly),emailForAutoFill,"Google")}):PMW.google.onError(r)},"json").fail(function(){alert(i18next.t("pmwjs_error_occurred_try_again"))})},connect:function(identityToken,redirectVO,initiatedFromBuilder=!1){PMW.google.onUserLogin_(identityToken,"authenticate/googleSignIn",redirectVO,!1,"","",initiatedFromBuilder)},link:function(identityToken,redirectVO,initiatedFromBuilder=!1){PMW.google.onUserLogin_(identityToken,"user/connectGoogleAccount",redirectVO,!0,"","",initiatedFromBuilder)}},fb:{init:function(){return window.fbAsyncInit=function(){FB.init({appId:PMW.FB_APP_ID,cookie:!0,version:PMW.FB_GRAPH_VERSION})},new Promise((resolve,reject)=>{!function(d,s,id){let js,fjs=d.getElementsByTagName(s)[0];d.getElementById(id)?resolve():(js=d.createElement(s),js.id=id,js.src="https://connect.facebook.net/"+PMW.FB_LOCALE_CODE+"/sdk.js",fjs.parentNode.insertBefore(js,fjs),js.onload=function(){resolve()},js.addEventListener("error",function(e){reject(e)}))}(document,"script","facebook-jssdk")})},initLoginButton:function(fbButton,onClickHandler){PMW.fb.init().then(function(){fbButton.removeClass("disabled"),PMW.onClick(fbButton,null,onClickHandler)}).catch(()=>alert(i18next.t("pmwjs_error_logging_in_via_fb")))},loginConnect:function(btn,isConnectOnly){let redirectUrl=void 0===btn.attr("data-link")?PMW.util.getRedirectURLFromHref(window.location.href):btn.attr("data-link");PMW.fb.initLoginButton(btn,function(){btn.addClass("disabled"),PMW.fb.login(function(response){response.authResponse&&PMW.fb.connect(new SSORedirectHelper(null,redirectUrl),isConnectOnly,response.authResponse.accessToken,""),btn.removeClass("disabled")},{scope:PMW.FB_PERMISSIONS})})},login:function(cb,perms){PMW.isStudent()?alert(i18next.t("pmwjs_fb_features_not_for_students")):(void 0===perms&&(perms=null),PMW.fb.init().then(function(){FB.login(cb,perms)}).catch(()=>alert(i18next.t("pmwjs_error_logging_in_via_fb"))))},initDisconnectHandler:function(){$(".js-disconnect-fb").click(function(){PMW.write(PMW.util.site_url("user/disconnectFacebookAccount")).done(function(response){"success"===response.status?window.location.href=PMW.util.site_url("user/editprofile"):alert(i18next.t("pmwjs_error_processing_request_try_again"))})})},connect:function(redirectVO,connectWithUserAccountOnly,accessToken,email,password="",initiatedFromBuilder=!1){var connectFunction=connectWithUserAccountOnly?"user/connectFacebookAccount":"authenticate/facebookconnect",params={email:email=void 0!==email?email:"",accessToken:accessToken=void 0!==accessToken?accessToken:"",password:password,redirectTo:redirectVO.redirect,initiatedFromBuilder:initiatedFromBuilder};PMW.setLoading(i18next.t("pmwjs_loading")),PMW.write(PMW.util.site_url(connectFunction),params,function(r){if(r.data&&void 0!==r.data.accessToken&&(accessToken=r.data.accessToken),"success"===r.status)PMW.handleSSOAccountSuccessResponse(r,function(){PMW.gtm.trackGA4SignupEvent(PMW.gtm.SIGNUP_LABELS.FACEBOOK),PMW.openEmailOptInModal(r.data.action,redirectVO)},function(){PMW.onConnectSuccess(r.data.action,redirectVO,r.data.currentDomain,r.data.newDomain)});else if("fail"===r.status)PMW.handleSSOAccountFailResponse(r,function(needEmailForAutoFill){let emailForAutoFill="";"undefined"!==needEmailForAutoFill&&!0===needEmailForAutoFill&&(emailForAutoFill=r.data.email),PMW.showEmailRequiredDialog(PMW.getAuthTokenAndConnectFacebook.bind(this,redirectVO,connectWithUserAccountOnly),emailForAutoFill,"Facebook")});else{let message=i18next.t("pmwjs_error_logging_in_via_fb");"undefined"!==r.message&&""!==r.message&&(message=r.message),alert(message)}},"json").fail(function(){alert(i18next.t("pmwjs_error_occurred_try_again"))}).always(()=>PMW.setLoading(null))},getLoginStatus:function(onConnected,onOther){PMW.fb.init().then(function(){FB.getLoginStatus(function(r){("connected"===r.status?onConnected:onOther)(r.authResponse)},!0)}).catch(()=>alert(i18next.t("pmwjs_unable_to_contact_fb_wait_reload")))},getFreshAccessToken:function(scopes){var dfd=jQuery.Deferred();return PMW.fb.login(function(response){null!=response.authResponse&&null!=response.authResponse.accessToken?dfd.resolve(response.authResponse):dfd.reject()},{scope:scopes,return_scopes:!0}),dfd.promise()},hasPermission:function(permission,allowedCallback,deniedCallback,preAskPermCallback,onClickElement){function fbloginpermloop(){PMW.fb.login(function(response){response.authResponse?PMW.write(PMW.util.site_url("authenticate/haspermission"),{perm:permission,token:response.authResponse.accessToken},function(data){"yes"==data?allowedCallback(response.authResponse):deniedCallback()}):deniedCallback()},{scope:permission})}PMW.fb.getLoginStatus(function(authResponse){PMW.write(PMW.util.site_url("authenticate/haspermission"),{perm:permission,token:authResponse.accessToken},function(data){"yes"===data?allowedCallback(authResponse):$.isFunction(preAskPermCallback)?(preAskPermCallback(),onClickElement&&onClickElement.unbind("click").click(function(){fbloginpermloop()})):fbloginpermloop()})},fbloginpermloop)}},isPWA:function(){return!(!navigator.standalone&&!window.matchMedia("(display-mode: standalone)").matches)},isLocal:function(){return-1<window.location.href.indexOf("/pmw/")||-1<window.location.href.indexOf("storybook.localpostermywall")},getAuthTokenAndConnectFacebook:function(redirectVO,connectWithUserAccountOnly,email,password){PMW.fb.login(function(response){response.authResponse?PMW.fb.connect(redirectVO,connectWithUserAccountOnly,response.authResponse.accessToken,email,password):alert(i18next.t("pmwjs_error_logging_in_via_fb"))},{scope:PMW.FB_PERMISSIONS})},handleSSOAccountSuccessResponse:function(r,newAccountHandler,connectHandler){"undefined"!==r.data.redirect&&""!==r.data.redirect?"undefined"!==r.data.errorMsg&&r.data.errorMsg?(PMW.setLoading(null),alert(r.data.errorMsg)):window.location.href=r.data.redirect:(1===r.data.isnew?newAccountHandler:connectHandler)()},handleSSOAccountFailResponse:function(r,showEmailRequiredDialog){if("undefined"===r.message||""===r.message){if("undefined"!==r.data.showEmailRequiredDialog&&!0===r.data.showEmailRequiredDialog)switch(r.reason){case"invalid-email":showEmailRequiredDialog(),PMW.showEmailDialogMessage($("#invalidemail"));break;case"non-sso-account-exists":showEmailRequiredDialog(!0),PMW.showEmailDialogMessage($("#nonssoaccount"));break;default:showEmailRequiredDialog()}}else alert(r.message)},gtm:{ONLINE_ADS_EVENT_TYPE_POSTER_SAVE:"poster_save",ONLINE_ADS_EVENT_TYPE_FREE_DOWNLOAD:"free_download",ONLINE_ADS_EVENT_TYPE_DOWNLOAD_PURCHASE:"download_purchase",ONLINE_ADS_EVENT_TYPE_SUBSCRIPTION_PURCHASE:"subscription_purchase",ONLINE_ADS_EVENT_TYPE_SIGNUP:"signup",PURCHASE_ORDER_TYPE_IMAGE:"image",PURCHASE_ORDER_TYPE_VIDEO:"video",PURCHASE_ORDER_TYPE_SUBSCRIPTION:"subscription",SIGNUP_EVENT_CATEGORY:"Signup",SIGNUP_EVENT_TYPE:"sign_up",SIGNUP_LABELS:{WEB:"web",ASYNC:"async",GOOGLE:"Google",FACEBOOK:"Facebook"},isGTMScriptLoaded_:!1,GA4_EVENT_PARAM_NAMES:{USER_PREMIUM_LEVEL:"userPremiumLevel",SEARCH_TERM:"searchTerm",TYPE:"type",SOCIAL_MEDIA_PLATFORM:"platform",SOURCE:"source",HASHED_ID:"hashedId",SLIDE_NUMBER:"slideNumber",SIGNUP_PARAM_NAME:"method"},GA4_MYSTUFF_CATEGORY:"MyStuff",GA4_NEED_MORE_X_PREFIX:"NeedMore",GA4_DESIGN_GALLERY_FILTERS_PREFIX:"DesignGallery_",GA4_NEED_MORE_X_MIN_RESULTS:10,GA4_CUSTOM_SEARCH_DEFINITION:{UNKNOWN:"Unknown",DESIGN_GALLERY:"Templates",EMAIL_GALLERY:"EmailTemplates",AUDIO:"Audio",STICKERS:"Stickers",SHAPES:"Shapes",CLIPART:{STORYBLOCKS:"StoryblocksIllustrations",PIXABAY:"PixabayIllustrations"},STOCK_IMAGE:{GETTY:"GettyImages",STORYBLOCKS:"StoryblocksImages",PIXABAY:"PixabayImages"},STOCK_VIDEO:{GETTY:"GettyVideos",STORYBLOCKS:"StoryblocksVideos",PIXABAY:"PixabayVideos"},DESIGN_GALLERY_FILTERS:{CONTENT_TYPE:"FilterType",COLOR:"FilterColor",MOTION:"FilterMotion",ORIENTATION:"FilterOrientation",DISPLAY_SIZE:"FilterSize",CATEGORY:"FilterCategory",SUBCATEGORY:"FilterSubcategory"}},CAROUSEL_ANALYTICS_EVENT_NAME:{CAROUSEL:"Carousel",NEXT_SUFFIX:"CarouselNext",PREVIOUS_SUFFIX:"CarouselPrevious",TOGGLE_SUFFIX:"Toggle",TOGGLE_VIEW_ALL:"ToggleViewAll",ITEM_CLICK:"ItemClick",GALLERY:"Gallery",ONLINE_GRAPHIC_DESIGN_LANDING_PAGE:"OnlineGraphicDesignLandingPage",DESIGN_TEMPLATES:"DesignTemplates",DESIGN_TEMPLATE_CATEGORIES:"DesignTemplateCategories",DESIGN_TEMPLATE_SIZES:"DesignTemplateSizes",EMAIL_TEMPLATES:"EmailTemplates",EMAIL_TEMPLATE_THEMES:"EmailTemplateThemes",EMAIL_TEMPLATE_TYPES:"EmailTemplateTypes",WALKTHORUGH:"Walkthrough",RECENT_POSTERS:"RecentPosters",TESTIMONIES:"Testimonies",DEVICES:"Devices",SCREENS:"Screens",THUMBNAIL:"Thumbnail",DESIGN_TIPS_SLIDES:"DesignTipsSlides",REVIEWS:"Reviews",SUBCATEGORY:"Subcategory"},init:function(){PMW.enableGTM&&(PMW.enableGATracking||PMW.enableOnlineAdsTracking)&&(this.isGTMScriptLoaded_||(window.dataLayer=window.dataLayer||[],this.isGTMScriptLoaded_=!0,function(w,d,s,l,i){w[l]=w[l]||[],w[l].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var f=d.getElementsByTagName(s)[0],j=d.createElement(s);j.async=!0,j.src="https://www.googletagmanager.com/gtm.js?id="+i,f.parentNode.insertBefore(j,f)}(window,document,"script","dataLayer",PMW.GTM_CONTAINER_ID)),this.init_())},trackGA4PurchaseEvent:function(purchaseData){PMW.enableGATracking&&this.isGTMScriptLoaded_&&(window.dataLayer.push({ecommerce:null}),window.dataLayer.push({event:"purchase",ecommerce:{purchase:purchaseData}}))},trackGA4PremiumDownloadEvents:function(data){var ga4CustomEventData=data.ga4CustomEventData;ga4CustomEventData&&(ga4CustomEventData.gettyPurchaseEventName&&PMW.gtm.trackGA4CustomEvent(ga4CustomEventData.gettyPurchaseEventName),ga4CustomEventData.newOrderEventName&&PMW.gtm.trackGA4CustomEvent(ga4CustomEventData.newOrderEventName))},trackGA4EventForClickedPopupCta:function(idPopup){idPopup===PMW.marketing.POPUP_ID_DESIGN_REQUEST&&PMW.gtm.trackGA4CustomEvent("Gallery_DesignRequest")},trackGA4CustomEvent:function(eventName,params={}){PMW.enableGATracking&&this.isGTMScriptLoaded_&&window.dataLayer.push({event:"custom_event",events:{name:eventName,params:params}})},trackNeedMoreTemplatesForGA4:function(searchTerm,numResults){PMW.gtm.trackGA4NeedMoreXEvent(searchTerm,PMW.gtm.GA4_CUSTOM_SEARCH_DEFINITION.DESIGN_GALLERY,numResults,PMW.needMoreTemplatesForSearchTerm)},trackGA4Search:function(searchTerm,searchType,numResults,minResults){PMW.enableGATracking&&this.isGTMScriptLoaded_&&(void 0===minResults&&(minResults=PMW.gtm.GA4_NEED_MORE_X_MIN_RESULTS),PMW.gtm.trackGA4CustomEvent("view_search_results",{search_term:searchTerm}),PMW.gtm.trackGA4NeedMoreXEvent(searchTerm,searchType,numResults,minResults))},trackOnlineAdsTrackingEvent:function(eventType,data){PMW.enableOnlineAdsTracking&&this.isGTMScriptLoaded_&&(data.event="online_ads_event",data.onlineAdsTrackingEventType=eventType,window.dataLayer.push(data))},setUserPersona:function(){var userPersonaId;!this.isGTMScriptLoaded_||null!==(userPersonaId=PMW.getUserPersonaId())&&window.dataLayer.push({userPersonaId:userPersonaId})},trackGA4NeedMoreXEvent:function(searchTerm,searchType,numResults,minResults){numResults<=(minResults=void 0===minResults?PMW.gtm.GA4_NEED_MORE_X_MIN_RESULTS:minResults)&&PMW.gtm.trackGA4CustomEvent(`${PMW.gtm.GA4_NEED_MORE_X_PREFIX}${searchType}`,{searchTerm:searchTerm,numResults:numResults})},trackGA4CarouselNextEvent:function(carouselName){PMW.gtm.trackGA4CustomEvent(`${carouselName}${PMW.gtm.CAROUSEL_ANALYTICS_EVENT_NAME.NEXT_SUFFIX}`)},trackGA4CarouselPreviousEvent:function(carouselName){PMW.gtm.trackGA4CustomEvent(`${carouselName}${PMW.gtm.CAROUSEL_ANALYTICS_EVENT_NAME.PREVIOUS_SUFFIX}`)},trackGA4CarouselItemClick:function(carouselName,itemName){PMW.gtm.trackGA4CustomEvent(`${carouselName}${PMW.gtm.CAROUSEL_ANALYTICS_EVENT_NAME.ITEM_CLICK}`,{itemName:itemName})},trackGA4CarouselToggleButtonClick:function(toggleBtnName){PMW.gtm.trackGA4CustomEvent(`${PMW.gtm.CAROUSEL_ANALYTICS_EVENT_NAME.CAROUSEL}${toggleBtnName}${PMW.gtm.CAROUSEL_ANALYTICS_EVENT_NAME.TOGGLE_SUFFIX}`)},trackGA4CarouselToggleViewAllClick:function(toggleBtnName){PMW.gtm.trackGA4CustomEvent(`${PMW.gtm.CAROUSEL_ANALYTICS_EVENT_NAME.CAROUSEL}${toggleBtnName}s${PMW.gtm.CAROUSEL_ANALYTICS_EVENT_NAME.TOGGLE_VIEW_ALL}`)},trackGA4SignupEvent:function(signupMethod){PMW.gtm.trackGA4CustomEvent(PMW.gtm.SIGNUP_EVENT_TYPE,{[PMW.gtm.GA4_EVENT_PARAM_NAMES.SIGNUP_PARAM_NAME]:signupMethod})},initTrackingOnGTM_:function(){PMW.enableGATracking&&window.dataLayer.push({enableGA:1}),PMW.enableOnlineAdsTracking&&PMW.ONLINE_ADS_TRACKING_ENABLED&&window.dataLayer.push({enableOnlineAdsTracking:1})},setUserProps_:function(){let userHashedId=PMW.getUserHashedId(),userPersonaId=PMW.getUserPersonaId(),data={userType:PMW.getUserType(),userPremiumLevel:PMW.getUserPremiumLevel().toString(),userLifeCycleState:PMW.getUserSalesFunnelState(),userTrialState:PMW.getUserTrialState()};null!==userHashedId&&(data.userHashedId=userHashedId),null!==userPersonaId&&(data.userPersonaId=userPersonaId),window.dataLayer.push(data)},init_:function(){this.isGTMScriptLoaded_&&(this.initTrackingOnGTM_(),this.setUserProps_(),PMW.isNewUser()&&PMW.gtm.trackOnlineAdsTrackingEvent(this.ONLINE_ADS_EVENT_TYPE_SIGNUP,{}))}},userConsent:{initManageConsentForm_:!1,getConsentCookieValues:function(){let consentCookieValues=PMW.util.readCookie("pmwuc");if(null===consentCookieValues)return null;var values=consentCookieValues.split(",");return{auto:"1"===values[0],googleAnalytics:"1"===values[1],onlineAds:"1"===values[2],personalization:"1"===values[3]}},checkConsent:function(){let request=new XMLHttpRequest,res;request.open("GET",PMW.util.site_url("user/checkConsent"),!0),request.onload=function(){if(200<=this.status&&this.status<400){try{res=JSON.parse(this.response)}catch(err){return}var data,auto,googleAnalytics,onlineAds,personalization;"success"===res.status&&void 0!==res.data&&(auto=(data=res.data).auto,googleAnalytics=data.googleAnalytics,onlineAds=data.onlineAds,personalization=data.personalization,!0===data.ask?PMW.userConsent.showUserConsentForm():(PMW.userConsent.setConsentCookieValues(auto,googleAnalytics,onlineAds,personalization),PMW.enableGATracking=!(!auto&&!googleAnalytics)&&!1!==PMW.enableGATracking,PMW.enableOnlineAdsTracking=!(!auto&&!onlineAds)&&!1!==PMW.enableOnlineAdsTracking,PMW.gtm.init()))}},request.send()},manageUserConsent:function(e){let btn=$(e.currentTarget);PMW.userConsent.hideUserConsentForm(),PMW.userConsent.showManageConsentDialog({googleAnalytics:"1"===btn.attr("data-google-analytics-consent"),onlineAds:"1"===btn.attr("data-online-ads-consent"),personalization:"1"===btn.attr("data-personalization-consent")})},showUserConsentForm:function(){let form=$("#user-consent-form");form.removeClass("_hidden").css("display",""),PMW.initConsentForm_||(PMW.initConsentForm_=!0,PMW.onClick(form.find(".btn-manage-consent"),null,PMW.userConsent.manageUserConsent),PMW.onClick(form.find(".btn-give-consent"),null,PMW.userConsent.sendUserConsent.bind(this,{googleAnalytics:!0,onlineAds:!0,personalization:!0})))},hideUserConsentForm:function(){let form=$("#user-consent-form");0<form.length&&form.addClass("_hidden").removeClass("-processing")},showManageConsentDialog:function(consentDefaults){let modal=$("#manage-cookie-modal");$("#chk-google-analytics").prop("checked",consentDefaults.googleAnalytics),$("#chk-online-ads").prop("checked",consentDefaults.onlineAds),$("#chk-personalization").prop("checked",consentDefaults.personalization),modal.removeClass("_hidden").css("display",""),modal.css("z-index",1e4),this.initManageConsentForm_||(this.initManageConsentForm_=!0,PMW.onClick(modal.find(".btn-done"),null,PMW.userConsent.onManageConsentDone.bind(this,consentDefaults)),PMW.onClick(modal.find(".btn-cancel"),null,PMW.userConsent.hideManageConsentDialog))},onManageConsentDone:function(consentDefaults){var userConsent={googleAnalytics:$("#chk-google-analytics").is(":checked"),onlineAds:$("#chk-online-ads").is(":checked"),personalization:$("#chk-personalization").is(":checked")};PMW.userConsent.getConsentCookieValues()&&JSON.stringify(consentDefaults)===JSON.stringify(userConsent)?PMW.userConsent.hideManageConsentDialog():PMW.userConsent.sendUserConsent(userConsent)},hideManageConsentDialog:function(){$("#manage-cookie-modal").addClass("_hidden"),PMW.userConsent.getConsentCookieValues()||PMW.userConsent.showUserConsentForm()},onSetConsentDone:function(userConsent){PMW.userConsent.setConsentCookieValues(!1,userConsent.googleAnalytics,userConsent.onlineAds,userConsent.personalization),PMW.userConsent.hideManageConsentDialog(),PMW.userConsent.hideUserConsentForm(),PMW.initTracking()},sendUserConsent:function(consent){"notloggedin"!==PMW.getUserId()?($("#user-consent-form").addClass("-processing"),PMW.write(PMW.util.site_url("user/setConsent"),consent,PMW.userConsent.onSetConsentDone.bind(this,consent))):PMW.userConsent.onSetConsentDone(consent)},setConsentCookieValues:function(auto,googleAnalytics,onlineAds,personalization){let autoStr=auto?"1":"0",googleAnalyticsStr=googleAnalytics?"1":"0",onlineAdsStr=onlineAds?"1":"0",personalizationStr=personalization?"1":"0";window.PMW.isEmbedded()&&"requestStorageAccess"in document&&(PMW.isSafari()||PMW.isIOS())?document.requestStorageAccess().then(()=>{PMW.util.setCookie("pmwuc",autoStr+","+googleAnalyticsStr+","+onlineAdsStr+","+personalizationStr,PMW.TRACKING_COOKIE_EXPIRY)}):PMW.util.setCookie("pmwuc",autoStr+","+googleAnalyticsStr+","+onlineAdsStr+","+personalizationStr,PMW.TRACKING_COOKIE_EXPIRY)}},init:function(){window.onerror=PMW.onWindowError,PMW.initializeCache("pmw",PMW.VERSION),PMW.initPremiumCookieForNavLinks(),PMW.setupNavExperiment(),PMW.setupJavaScriptExperiment(),PMW.initEligibleCountryCode()},csrfSelector:"input[class=js-csrf-input]",load:function(target,url,params,callback,context){let selector,response,type,self=target,off=url.indexOf(" "),ajaxRequest=null,jsVersion=PMW.VERSION,htmlVersion=PMW.HTML_VERSION,userId=PMW.getUserId();return 0<=off&&(selector=url.slice(off,url.length),url=url.slice(0,off)),jQuery.isFunction(params)?(callback=params,params=void 0):params&&"object"==typeof params&&(type="POST"),0<self.length&&(PMW.getCsrfToken((function(token_value,token_source){var ajaxOpts="csrf_token",csrfMetaTag=document.querySelector('meta[name="data-csrf-name"]');if(csrfMetaTag&&(ajaxOpts=csrfMetaTag.content),"object"==typeof params){null===params&&(params={});let customOrderedParams=[[ajaxOpts,token_value],["_v",htmlVersion],["_jv",jsVersion],["_rand",userId],["csrf_token_source",token_source],["data_type",PMW.objectDataType]];for(var[key,value]of Object.entries(params))customOrderedParams.push([key,value]);params=Object.fromEntries(customOrderedParams)}ajaxOpts={url:url,type:type,dataType:"html",data:params,beforeSend:function(){context&&null!=PMW.currentAjaxRequest[context]&&PMW.currentAjaxRequest[context].abort()}};addLocalOnlyParamsToAjax(ajaxOpts),PMW.addAjaxParamsForSubdomainToSubfolderRequests(ajaxOpts),ajaxRequest=jQuery.ajax(ajaxOpts).done(function(responseText){response=arguments,self.html(selector?jQuery("<div>").append(jQuery.parseHTML(responseText)).find(selector):responseText)}).complete(callback&&function(jqXHR,status){self.each(callback,response||[jqXHR.responseText,status,jqXHR]),PMW.currentAjaxRequest[context]=null})}).bind(this)),context&&(PMW.currentAjaxRequest[context]=ajaxRequest)),target},getCsrfToken:function(callback){var csrf_hash=this.util.readCookie("csrf_cookie");return null===csrf_hash?this.getRequest("authenticate/getCsrfData").then(function(response){return null===(csrf_hash=PMW.util.readCookie("csrf_cookie"))?callback(response.data["csrf-token-hash"],PMW.csrfSourceAjaxRequestResponse):callback(csrf_hash,PMW.csrfSourceCookieAfterAjaxRequest)}):callback(csrf_hash,PMW.csrfSourceCookie)},write:function(url,data,callback,type,ajaxOpts={}){var jsVersion=PMW.VERSION,htmlVersion=PMW.HTML_VERSION,userId=PMW.getUserId(),userId="notloggedin"===userId?"Anon":userId;return"function"==typeof data&&(type=type||callback,callback=data,data={}),"object"!=typeof data&&"string"!=typeof data&&(data={}),PMW.getCsrfToken(function(token_value,token_source){var token_name="csrf_token",csrfMetaTag=document.querySelector('meta[name="data-csrf-name"]');if(csrfMetaTag&&(token_name=csrfMetaTag.content),"object"==typeof data)if((data=null===data?{}:data)instanceof FormData){let customOrderedFormData=new FormData;customOrderedFormData.append(token_name,token_value),customOrderedFormData.append("_v",htmlVersion),customOrderedFormData.append("_jv",jsVersion),customOrderedFormData.append("_rand",userId),customOrderedFormData.append("csrf_token_source",token_source),customOrderedFormData.append("data_type",PMW.formDataType);for(const item of data.entries())customOrderedFormData.append(item[0],item[1]);data=customOrderedFormData,ajaxOpts.processData=!1,ajaxOpts.contentType=!1}else{let customOrderedData=[[token_name,token_value],["_v",htmlVersion],["_jv",jsVersion],["_rand",userId],["csrf_token_source",token_source],["data_type",PMW.objectDataType]];for(var[key,value]of Object.entries(data))customOrderedData.push([key,value]);data=Object.fromEntries(customOrderedData)}return"string"==typeof data&&(0<=data.search(token_name)?data=data.replace(token_name+"="+PMW.util.getQueryStringValue(token_name,"?"+data),token_name+"="+token_value):(""!==data&&(data+="&"),data+="_v="+htmlVersion+"&",data+="_jv="+jsVersion+"&",data+="_rand="+userId+"&",data+=token_name+"="+token_value+"&",data+="csrf_token_source="+token_source+"&",data+="data_type="+PMW.stringDataType)),ajaxOpts.type="POST",ajaxOpts.url=url,void 0!==data&&(ajaxOpts.data=data),void 0!==callback&&(ajaxOpts.success=callback),void 0!==type&&(ajaxOpts.dataType=type),addLocalOnlyParamsToAjax(ajaxOpts),PMW.addAjaxParamsForSubdomainToSubfolderRequests(ajaxOpts),$.ajax(ajaxOpts).fail(function(response){var errorMessage;403===response.status?(response.data=response.responseJSON,errorMessage=i18next.t("pmwjs_unauthorized_request_error"),callback!==$.noop&&void 0!==callback&&alert(errorMessage)):callback!==$.noop&&void 0!==callback&&callback(response)})})},writeLocal:async function(uri,data,type,ajaxOpts={}){var response=await PMW.write(PMW.util.site_url(uri),data,$.noop,type,ajaxOpts);if("success"===response.status)return response.data;throw getErrorAjaxResponse(response,uri,data)},readLocal:async function(uri,data,key){var response=await PMW.getRequest(uri,data,key);if("success"===response.status)return response.data;throw getErrorAjaxResponse(response,uri,data)},formSubmit:function(e){var form;window.location.href.includes("index.php/manageapp/")||(e.preventDefault(),form=$(e.currentTarget),PMW.getCsrfToken(function(token){form.find(PMW.csrfSelector).val(token),form.get(0).submit()}))},pollingAjaxCallAsync:async function(ajaxFunction,pollingFunction,timeout=LONG_AJAX_CALL_TIMEOUT,eventId=null){let initialData=await ajaxFunction(),startingTime=performance.now(),halt=!1,listener=()=>halt=!0;for(eventId&&document.addEventListener(this.getPollingStopEvent(eventId),listener);!halt&&performance.now()-startingTime<timeout;){var data=await pollingFunction(initialData);if(data.isAvailable)return data.data}eventId&&document.removeEventListener(this.getPollingStopEvent(eventId),listener)},getPollingStopEvent:function(eventId){return`polling:stop:${eventId}`},pollingAjaxCall:function(ajaxFunction,pollingFunction,onSuccess,onError){ajaxFunction().done(this.onInitialAjaxCallSuccess_.bind(this,pollingFunction,onSuccess,onError)).fail(onError)},onInitialAjaxCallSuccess_:function(pollingFunction,onSuccess,onError,response){"error"===response.status?onError(response.message):this.pollAjaxCall_(pollingFunction,onSuccess,onError,response.data)},pollAjaxCall_:function(pollingFunction,onSuccess,onError,initialData){pollingFunction(initialData).done(this.isPollingAjaxCallFinished_.bind(this,pollingFunction,onSuccess,onError,initialData)).fail(onError)},isPollingAjaxCallFinished_:function(pollingFunction,onSuccess,onError,initialData,response){"success"===response.status&&response.data?response.data.isAvailable?onSuccess(response.data.data):this.pollAjaxCall_(pollingFunction,onSuccess,onError,initialData):onError()},onWindowError:function(msg,url,line,col,error){var extra;return"string"==typeof url&&0<url.length&&0<url.indexOf(PMW.BASE_URL)&&(extra=col?"\ncolumn: "+col:"",extra+=error?"\nerror: "+error:"",PMW.log("Error: "+msg+"\nurl: "+url+"\nline: "+line+extra)),!1},initPremiumCookieForNavLinks:function(){null===PMW.getUserPremiumLevel()&&"regular"===PMW.getUserType()&&void 0!==window.appendNavLinksForPremium&&PMW.getCsrfToken(function(token_value){var token_name="csrf_token",ajax=document.querySelector('meta[name="data-csrf-name"]');ajax&&(token_name=ajax.content);ajax=new XMLHttpRequest;ajax.onreadystatechange=function(){4==this.readyState&&200==this.status&&0<this.responseText.length&&"1"===JSON.parse(this.responseText).data.premium&&window.appendNavLinksForPremium()},ajax.open("POST",PMW.util.site_url("premium/getUserPremiumLevelJSON"),!0),ajax.send(token_name+"="+encodeURIComponent(token_value))})},initTracking:function(){var consentCookieValues=PMW.userConsent.getConsentCookieValues();null===consentCookieValues?PMW.userConsent.checkConsent():(PMW.enableGATracking=!1!==PMW.enableGATracking&&(consentCookieValues.googleAnalytics||consentCookieValues.auto),PMW.enableOnlineAdsTracking=!1!==PMW.enableOnlineAdsTracking&&(consentCookieValues.onlineAds||consentCookieValues.auto),PMW.gtm.init())},initEligibleCountryCode:function(){"notloggedin"!==PMW.getUserId()&&null===PMW.util.readCookie("pmwuecc")&&PMW.getRequest("user/getUserEligibleCountryCode").done(function(r){"success"===r.status&&PMW.util.setCookie("pmwuecc",r.data.eligibleCountryCode,PMW.ELIGIBLE_COUNTRY_CODE_COOKIE_EXPIRY)})},initRecaptcha:function(){var script,m;PMW.isRecaptchaInit||(PMW.isRecaptchaInit=!0,script=document.createElement("script"),m=document.getElementsByTagName("script")[0],script.text="var recaptchaLoaded = "+String(function(){PMW.grecaptchaReady=!0,PMW.isPosterMaker()&&$(".grecaptcha-badge").css("visibility","hidden");var disabledBtnsSelector=$(".js-btn-login");disabledBtnsSelector.parent().removeClass("default -disabled"),disabledBtnsSelector.removeAttr("-disabled");disabledBtnsSelector=$(".js-btn-signup");disabledBtnsSelector.removeClass("-disabled"),disabledBtnsSelector.removeAttr("-disabled"),$(".js-btn-student-login").removeClass("-disabled");disabledBtnsSelector=$([".js-btn-login-async",".js-btn-create-async",".js-btn-student-async"].join(", "));disabledBtnsSelector.removeClass("-disabled"),disabledBtnsSelector.removeAttr("-disabled"),PMW.setLoading(null)}),m.parentNode.insertBefore(script,m),script=document.createElement("script"),m=document.getElementsByTagName("script")[0],script.async=1,script.src="//www.recaptcha.net/recaptcha/api.js?onload=recaptchaLoaded&render="+PMW.RECAPTCHA_V3_KEY,m.parentNode.insertBefore(script,m))},initRecaptchav2:function(){let script=document.createElement("script");m=document.getElementsByTagName("script")[0],script.async=1,script.src="https://www.google.com/recaptcha/api.js",m.parentNode.insertBefore(script,m)},setupNavExperiment:function(){if(PMW.NAV_EXPERIMENTS&&0<PMW.NAV_EXPERIMENTS.length)for(var i=0;i<PMW.NAV_EXPERIMENTS.length;i++){var id=PMW.NAV_EXPERIMENTS[i].experimentId;PMW.util.readCookie("nevk_"+id)}},setupJavaScriptExperiment:function(){PMW.JAVASCRIPT_EXPERIMENT&&PMW.EXPERIMENT_ID&&PMW.VARIATION_NUMBER},openEmailOptInModal:function(action,redirectVO){PMW.setLoading(null);var dlg={};dlg[i18next.t("pmwjs_complete_signup")]=function(){$("#emailoptinchk").is(":checked")?PMW.write(PMW.util.site_url("authenticate/subscribetoemails"),null,function(){PMW.closeModalDialog("emailoptin-modal")}):PMW.closeModalDialog("emailoptin-modal")};dlg=PMW.openModalDialog("emailoptin-modal",i18next.t("pmwjs_deals_promotions"),dlg,!1,"-modal-400 -auto");dlg.find(".close").hide(),dlg.on("modal:close",PMW.onConnectSuccess.bind(this,action,redirectVO)),dlg.find(".content").html('<p><input type="checkbox" id="emailoptinchk"/><label for="emailoptinchk">'+i18next.t("pmwjs_notify_freebies_discounts")+"</label></p>")},onConnectSuccess:function(action,redirectVO,currentDomain,newDomain){if("refresh"===action)window.location.reload();else if(0<action){let url=redirectVO.getPostLoginAction();"string"==typeof url&&""!==url?(void 0!==currentDomain&&void 0!==newDomain&&(url=url.replace(currentDomain,newDomain)),window.location.href=url):$.isFunction(url)?url(action):window.location.href=PMW.util.site_url("posters/mine")}},onClick:function(el,s,h,d){return"undefined"!=typeof $&&void 0!==$.vmouse||(PMW.click="click"),isNaN(d)?el.on(PMW.click,s,function(e){e.preventDefault();var el=$(e.currentTarget);el.hasClass("disabled")||1==el.prop("disabled")||h.apply(this,[e])}):(el.data("dblTimer",-1),el.on(PMW.click,s,function(e){e.preventDefault(),$(e.currentTarget).hasClass("disabled")||-1!==el.data("dblTimer")||(el.data("dblTimer",setTimeout(function(){el.data("dblTimer",-1)},d)),h.apply(this,[e]))})),el},startButtonLoading:function(btn,cb){"function"!=typeof cb&&(cb=function(){});var defaultLabel=btn.find(".default-label"),loadingState=btn.find(".loading-state");btn.parent().addClass("-loading"),defaultLabel.addClass("animated -fill-mode-forwards slideOut -to-bottom").one(PMW.util.animationEndEvents,function(){defaultLabel.addClass("_hidden").removeClass("slideOut -to-bottom"),loadingState.removeClass("_hidden").addClass("animated -fill-mode-forwards slideIn -from-top").one(PMW.util.animationEndEvents,function(){loadingState.removeClass("slideIn -from-top"),cb()})})},completeButtonLoading:function(btn,status,successCallback,errorCallback){"function"!=typeof successCallback&&(successCallback=function(){}),"function"!=typeof errorCallback&&(errorCallback=function(){});var cb="success"===status?successCallback:errorCallback,loaderAnimationClass="success"===status?"-animate-loaded":"-animate-failed",loaderContainer=btn.find(".loader-container"),loadingState=btn.find(".loading-state"),loadingLabel=loadingState.find(".loading-label"),loadedLabel=loadingState.find(".loaded-label.-"+status),defaultLabel=btn.find(".default-label");loaderContainer.removeClass("-animate-loading").addClass(loaderAnimationClass),loadingLabel.addClass("animated -fill-mode-forwards slideOut -to-bottom").one(PMW.util.animationEndEvents,function(){loadingLabel.addClass("_hidden").removeClass("slideOut -to-bottom"),loadedLabel.removeClass("_hidden").addClass("animated -fill-mode-forwards slideIn -from-top").one(PMW.util.animationEndEvents,function(){loadedLabel.removeClass("slideIn -from-top"),setTimeout(function(){btn.parent().removeClass("-loading"),loadingState.addClass("animated -fill-mode-forwards slideOut -to-top").one(PMW.util.animationEndEvents,function(){loadingState.addClass("_hidden").removeClass("slideOut -to-top"),defaultLabel.removeClass("_hidden").addClass("animated -fill-mode-forwards slideIn -from-bottom").one(PMW.util.animationEndEvents,function(){loadingState.removeClass("slideIn -from-bottom")})}),loaderContainer.removeClass(loaderAnimationClass).addClass("-animate-loading"),loadingLabel.removeClass("_hidden"),loadedLabel.addClass("_hidden"),cb()},1500)})})},initHeader:function(){function i(id,h){var e=document.getElementById(id);e&&(e.innerHTML=h)}function del(id){var e=document.getElementById(id);e&&e.parentNode.removeChild(e)}let pmwn=PMW.util.readCookie("pmwn"),n=document.getElementById("nav");n&&(null!==pmwn&&"new+user"!==pmwn&&(pmwn=PMW.util.escapeHTML(decodeURIComponent(pmwn.replace(/\+/g," "))),del("navauth"),del("nav-auth-small"),document.getElementById("navuser").setAttribute("title",pmwn),i("ulname",pmwn),i("ulname-toggled",pmwn),n&&(n.className+=" -loggedin")),PMW.util.readCookie("pmwla")&&n&&(n.className+=" -su"))},getUserType:function(){var p=PMW.util.readCookie("pmwi2");if("string"==typeof p){p=p.split(".");if(1<p.length)return"premium"!==p[1]&&"premium-plus"!==p[1]||(p[1]="regular",PMW.util.setCookie("pmwi2",p.join("."),14)),p[1]}return"notloggedin"},isVerificationNeeded:function(){var p=PMW.util.readCookie("pmwi2");if("string"==typeof p){p=p.split(".");if(3<p.length)return parseInt(p[3])}return 0},getUserPremiumLevel:function(){var premiumLevel=PMW.getValueAtIndexFromSubscriptionDetailsCookie(1);return null===premiumLevel?0:parseInt(premiumLevel)},getUserTrialState:function(){var isTrial=PMW.getValueAtIndexFromSubscriptionDetailsCookie(3);return null===isTrial?0:parseInt(isTrial)},isUserResellerClientTeamMember:function(){return"2"===PMW.getValueAtIndexFromSubscriptionDetailsCookie(2)},getUserSubscriptionPlanMonths:function(){let value=PMW.getValueAtIndexFromSubscriptionDetailsCookie(0);return null===value&&(value=0),parseInt(value)},getValueAtIndexFromSubscriptionDetailsCookie:index=>{const c=PMW.util.readCookie("pmwsd");return"string"!=typeof c?null:c.split("~")[index]},isPAYGUser:function(){return 0===PMW.getUserPremiumLevel()},isUserPremium:function(){return 0<PMW.getUserPremiumLevel()},addGalleryTemplateWindowStatsToBeSynced:function(g,isSearchPage=!1){let parentGrid=$(g.closest(".js-page-grid")),url=new URL(parentGrid.attr("data-url")),pagePath=PMW.util.getPagePath(url);if(isSearchPage){let currentUrl=new URL(window.location.href),searchParams=currentUrl.searchParams.toString();pagePath=pagePath+"?"+searchParams}PMW.write(PMW.util.site_url("posters/addGalleryTemplateWindowStatsToBeSynced"+pagePath))},getUserEligibleCountryCode:function(){var cookieValue="notloggedin"===PMW.getUserId()?"pmwaecc":"pmwuecc",cookieValue=PMW.util.readCookie(cookieValue);return cookieValue||"US"},getUserId:function(){var p=PMW.util.readCookie("pmwi2");if("string"==typeof p){p=p.split(".");if(1<p.length)return parseInt(p[0])}return"notloggedin"},isUserLoggedIn:function(){return"notloggedin"!==PMW.getUserId()},getUserHashedId:function(){var p=PMW.util.readCookie("pmwi2");if("string"==typeof p){p=p.split(".");if(4<p.length)return p[4]}return null},getAnonUserId:function(){return""===this.anonUserId_&&(this.anonUserId_=this.util.createRandomId()),this.anonUserId_},getUserPersonaId:function(){var c=PMW.util.readCookie("pmwpi");return"string"==typeof c?c:null},getUserSalesFunnelState:function(){let c=PMW.util.readCookie("pmwi2");if("string"==typeof c){var p=c.split(".");if(5<p.length)return p[5]}return null},isNewUser:function(){var c=PMW.util.readCookie("pmwnu");return"string"==typeof c&&"1"===c},deleteNewUserCookie:function(){PMW.util.deleteCookie("pmwnu")},isEDU:function(){var userType=this.getUserType();return"teacher"===userType||"student"===userType},sendPosterMakerMessageIframe:function(){this.isEmbedded()&&(void 0===PMW.plugin?PMW.getJsAssetGroup("iframePlugin",(function(){void 0!==PMW.plugin&&PMW.plugin.initiateComWithIframe()}).bind(this)):PMW.plugin.initiateComWithIframe())},isEmbedded:function(){if(window.PMW.isStorybook())return!1;try{return window.self!==window.top}catch(e){return!0}},isStorybook:function(){return-1<window.location.href.indexOf("storybook.localpostermywall")},initEmbeddedModeUI:function(){this.isEmbedded()&&($("body").addClass("-embedded"),$(".embedded-remove-url").attr("href","javascript:void(0);").attr("title",""))},isTeacher:function(){return"teacher"===this.getUserType()},isStudent:function(){return"student"===this.getUserType()},hideForEDU:function(ctx){PMW.isEDU()&&(ctx=ctx||document,$(".eduhide",ctx).hide())},isScrolledIntoView:function(element,partialElement,offset){offset=offset||0;var elemHeight=$(window),elem=$(element),viewport={top:elemHeight.scrollTop(),left:elemHeight.scrollLeft()};viewport.right=viewport.left+elemHeight.width(),viewport.bottom=viewport.top+elemHeight.height();var bounds=elem.offset();bounds.right=bounds.left+elem.outerWidth(),bounds.bottom=bounds.top+elem.outerHeight();var elemBottom=bounds.top+elem.height(),elemHeight=elem.height();return elemBottom-((elemHeight=partialElement?elem.height()/3:elemHeight)-offset)<=viewport.bottom&&!(viewport.right<bounds.left||viewport.left>bounds.right)},toggleForDesigner:function(ctx){"designer"===PMW.getUserType()&&(ctx=ctx||document,$(".designer-toggle:visible").remove(),$(".designer-toggle",ctx).removeClass("hidden").show())},setUserPremiumLevel:function(ctx){var premiumClass;switch(ctx=ctx||document,PMW.getUserPremiumLevel()){case 1:premiumClass="premium-plan-one";break;case 2:premiumClass="premium-plan-two";break;default:premiumClass="non-premium"}$("body",ctx).removeClass("premium-plan-one premium-plan-two non-premium").addClass(premiumClass)},hideForStudent:function(ctx){if(PMW.isStudent()){ctx=ctx||document;var a=$(ctx).find("a.student-redirect");return $.each(a,function(){$(this).attr("href",PMW.util.site_url("edu/denied"))}),$(".student-hide",ctx).removeClass("visible-desktop").hide(),!0}return!1},toggleInOut:function(el,show){return show&&el.hasClass("out")?el.removeClass("out").addClass("in"):!show&&el.hasClass("in")&&el.removeClass("in").addClass("out"),el},changeSearchForStudent:function(ctx){(ctx=ctx||$("#nav form")).attr("action",PMW.util.site_url("posters/searchBackgrounds"))},isOldPosterMaker:function(){return"undefined"!=typeof PMConfig},isReactPosterMaker:function(){return!0===window.isPosterMaker},isPosterMaker:function(){return this.isOldPosterMaker()||this.isReactPosterMaker()},log:function(t){PMW.write(PMW.util.site_url("logerror/clientlog"),{message:encodeURIComponent(t)})},trackOnlineAdsEvent:function(eventType,orderType,orderValue,orderId){let data={};null!==orderType&&(data.orderType=orderType),null!==orderValue&&(data.orderValue=orderValue),null!==orderId&&(data.orderId=orderId),PMW.gtm.trackOnlineAdsTrackingEvent(eventType,data)},onSubscriptionActivation:function(orderValue,idSubscriptionPurchase){PMW.trackOnlineAdsEvent(PMW.gtm.ONLINE_ADS_EVENT_TYPE_SUBSCRIPTION_PURCHASE,PMW.gtm.PURCHASE_ORDER_TYPE_SUBSCRIPTION,orderValue,idSubscriptionPurchase)},isNotAlreadyViewed:function(li){return 1!=li.attr("data-viewed")},incrementPosterView:function(id,idcreator,ignoredIds,pageType){null!==id&&PMW.write(PMW.util.site_url("poster/viewed"),{id:id,idcreator:idcreator,"ignored[]":ignoredIds,type:pageType})},doThumbnailView:function(li,filter,attr){void 0===attr&&(attr="data-seq");var type=li.hasClass("video-item")?".video-item":".image-item";li.attr("data-viewed",1);for(var sibs=li.prevAll(type+'[data-viewed!="1"]').attr("data-viewed",1),ignoredIds=[],i=0;i<sibs.length;i++)ignoredIds[ignoredIds.length]=$(0<filter.length?$(filter,sibs[i]):sibs[i]).attr(attr);return ignoredIds},showEmailDialogMessage:function(messageNode){var emailSignupModal=$("#emailsignup-modal");emailSignupModal.hasClass("-with-message")?(messageNode.show(250),messageNode.addClass("animated flash").one(PMW.util.animationEndEvents,function(){messageNode.removeClass("animated flash")})):(emailSignupModal.addClass("-with-message"),messageNode.show(250))},showEmailRequiredDialog:function(cb,existingEmail,ssoName){let txtEmailSignup,passwordField,errorEmptyPass,errorIncorrectPass,errorResponse,errorExistingEmail,modalContent,errorInvalidEmail,modalCloseBtn,esDlg,buttons={};buttons[i18next.t("pmwjs_continue")]=function(){function hideErrors(){errorIncorrectPass.hide(),errorResponse.hide(),errorEmptyPass.hide(),errorExistingEmail.hide()}txtEmailSignup=$("#emailsignup"),passwordField=$(".content .password-field"),errorEmptyPass=$(".error-empty-password"),errorIncorrectPass=$(".error-wrong-password"),errorResponse=$(".error-response"),errorExistingEmail=$(".error-existing-email"),errorInvalidEmail=$("#invalidemail"),modalContent=esDlg.find(".modal-content"),modalCloseBtn=esDlg.find(".modal-btn-close"),hideErrors();var email=$.trim(txtEmailSignup.val()),passwordTextField=$("#verify-password"),password=$.trim(passwordTextField.val());txtEmailSignup.on("keyup",function(){passwordField.hide(),hideErrors(),modalContent.removeClass("add-password-row")}),PMW.isOldPosterMaker()&&PMW.onClick(modalCloseBtn,null,function(){!function(){var confirmDialog={};confirmDialog[i18next.t("pmwjs_cancel")]=function(){PMW.closeModalDialog("emailsignup-confirmation-modal")},confirmDialog[i18next.t("pmwjs_close")]=function(){PMW.closeModalDialog("emailsignup-confirmation-modal"),PMW.closeModalDialog("emailsignup-modal")};confirmDialog=PMW.openModalDialog("emailsignup-confirmation-modal",i18next.t("pmwjs_cancel_login_using_fb"),confirmDialog,!1,"-modal-250 -flex",!1);confirmDialog.find(".content").html("<h5>"+i18next.t("pmwjs_sure_cancel_logging_in_with_fb")+"</h5>"),confirmDialog.find(".close").hide()}()}),0<email.length?passwordField.is(":hidden")?PMW.write(PMW.util.site_url("authenticate/verifyUserEmailState"),{email:email},function(r){if("success"===r.status)switch($("#invalidemail").hide(),r.data.state){case"allow":cb(email),PMW.closeModalDialog("emailsignup-modal"),hideErrors();break;case"ask-password":passwordField.show(),modalContent.addClass("add-password-row");break;case"redirect":return void(PMW.isPosterMaker()?(PMW.showEmailDialogMessage(errorExistingEmail),modalCloseBtn.show()):(PMW.closeModalDialog("emailsignup-modal"),modalContent.removeClass("add-password-row"),window.location.href=PMW.util.site_url("authenticate/showlogin")));case"invalid":PMW.showEmailDialogMessage(errorInvalidEmail),passwordTextField.focus()}else PMW.showEmailDialogMessage(errorResponse),txtEmailSignup.focus()}):0<password.length?PMW.write(PMW.util.site_url("authenticate/verifyUserEmailAndPassword"),{email:email,password:password},function(r){"success"===r.status?r.data.match?(PMW.closeModalDialog("emailsignup-modal"),cb(email,password)):(PMW.showEmailDialogMessage(errorIncorrectPass),passwordTextField.focus()):(PMW.showEmailDialogMessage(errorResponse),txtEmailSignup.focus())}):(PMW.showEmailDialogMessage(errorEmptyPass),passwordTextField.focus()):(PMW.showEmailDialogMessage(errorInvalidEmail),txtEmailSignup.focus())};let modalTitle=i18next.t("pmwjs_email_required"),modalClass="",emailFieldLabel=i18next.t("pmwjs_enter_email_to_login"),emailFieldSpamFine='<span class="fineprint">'+i18next.t("pmwjs_hate_spam_much_you_do")+"</span>",passwordFieldLabel=i18next.t("pmwjs_account_with_email_exists_enter_password",{ssoName:ssoName}),passwordFieldClass="hidden",hideCloseBtn=!0;"undefined"!==existingEmail&&""!==existingEmail&&(modalTitle=i18next.t("pmwjs_account_already_exists"),modalClass=" -long",emailFieldLabel=i18next.t("pmwjs_email"),emailFieldSpamFine="",passwordFieldLabel=i18next.t("pmwjs_password"),passwordFieldClass="",hideCloseBtn=!1),esDlg=PMW.openModalDialog("emailsignup-modal",modalTitle,buttons,!1,"-modal-500 -flex"+modalClass,!1),hideCloseBtn&&esDlg.find(".close").hide(),esDlg.find(".content").html('<div id="invalidemail" class="danger alert body-s -top hidden">'+i18next.t("pmwjs_valid_email_address")+'</div><div id="nonssoaccount" class="danger alert body-s -top hidden">'+i18next.t("pmwjs_account_with_email_already_exists_use_email_password_to_link",{email:existingEmail,socialAccount:ssoName})+'</div><div class="field"><label for="emailsignup">'+emailFieldLabel+'</label><input type="email" class="text input" id="emailsignup" placeholder="'+i18next.t("pmwjs_enter_your_email_address")+'" autocapitalize="off" autocorrect="off" autocomplete="email" value="'+existingEmail+'">'+emailFieldSpamFine+'</div><div class="field password-field '+passwordFieldClass+'"><label for="verify-password">'+passwordFieldLabel+'</label><input type="password" class="text input" id="verify-password" placeholder="'+i18next.t("pmwjs_enter_your_password")+'" autocapitalize="off" autocorrect="off" /></div><div class="error-empty-password danger alert hidden">'+i18next.t("pmwjs_please_enter_a_password")+'</div><div class="error-wrong-password danger alert hidden">'+i18next.t("pmwjs_incorrect_password")+'</div><div class="error-response danger alert hidden">'+i18next.t("pmwjs_error_try_again_reload_page")+'</div><div class="error-existing-email danger alert hidden">'+i18next.t("pmwjs_fb_account_already_associated_with_email")+"</div>")},showAlternativeEmailRequiredDialog:function(email,cb){var buttons={};buttons[i18next.t("pmwjs_cancel")]=function(){PMW.closeModalDialog("alternative-email-modal")},buttons[i18next.t("pmwjs_continue")]=function(){txtEmail=aerDialog.find(".email");var email=$.trim(txtEmail.val());0<email.length?(PMW.closeModalDialog("alternative-email-modal"),cb(email)):(PMW.showEmailDialogMessage($("#invalidemail")),txtEmail.focus())};var txtEmail,aerDialog=PMW.openModalDialog("alternative-email-modal",i18next.t("pmwjs_alternative_email_required"),buttons,!1,"-modal-550 -flex");aerDialog.find(".content").html("<p>"+i18next.t("pmwjs_account_with_email_exists_provide_alternative",{email:PMW.util.escapeHTML(email)})+'</p><div class="field"><input type="email" class="text input email" placeholder="'+i18next.t("pmwjs_enter_your_email_address")+'" autocapitalize="off" autocorrect="off" autocomplete="email"/></div><p><a href="javascript:void(0)" class="existing-account-info">'+i18next.t("pmwjs_click_here_for_more_info")+'</a></p><div id="invalidemail" class="danger alert hidden">'+i18next.t("pmwjs_valid_email_address")+"</div>"),PMW.onClick(aerDialog.find(".existing-account-info"),null,PMW.showExistingAccountDialog.bind(this,email))},showExistingAccountDialog:function(email){var buttons={};buttons[i18next.t("pmwjs_ok")]=function(){PMW.closeModalDialog("existing-account-modal")},PMW.openModalDialog("existing-account-modal",i18next.t("pmwjs_account_already_exists"),buttons,!1,"-modal-550 -modal-h-450 -flex").find(".content").html("<p>"+i18next.t("pmwjs_account_with_email_exists_provide_alternative",{email:PMW.util.escapeHTML(email)})+"</p><p>"+i18next.t("pmwjs_if_forgot_password_use_forgot_your_password",{email:PMW.util.escapeHTML(email)})+"</p><p>"+i18next.t("pmwjs_access_designs_another_account_use_share")+"</p><p>"+i18next.t("pmwjs_if_transfer_designs_contact_support",{href:PMW.util.site_url("user/feedbackHelpCenter")})+"</p>")},premiumContentBlockMessage:function(onClose){var idModal="premium-cannot-purchase-modal",buttons={};buttons[i18next.t("pmwjs_close")]=function(){"function"==typeof onClose&&onClose(),PMW.closeModalDialog(idModal)},PMW.openModalDialog(idModal,i18next.t("pmwjs_cannot_purchase_premium_content"),buttons,!1,PMW.isPosterMaker()?"-flex":"").find(".content").html("<p>"+i18next.t("pmwjs_cannot_buy_only_getty_images")+"</p>")},posterResizedWarningMessage:function(poster){var idModal="poster-resized-warning-modal",buttons={};buttons[i18next.t("pmwjs_ok")]=function(){PMW.closeModalDialog(idModal)},PMW.openModalDialog(idModal,i18next.t("pmwjs_poster_resized_warning"),buttons,!0,PMW.isPosterMaker()?"-flex":"").find(".content").html('<div class="icon-wrapper"><i class="icon-info"></i></div><p class="message">'+i18next.t("pmwjs_poster_resized_to_new_dimensions",{posterType:PMW.util.escapeHTML(poster.type.displayName),description:poster.type.description})+"</p>")},openDownloadDialog:function(data,facade){PMW.util.require(void 0===PMW.doOpenDownloadDialog,"downloadDialog",!0,function(){PMW.doOpenDownloadDialog(data,facade)})},openGalleryDialog:function(idFolder){PMW.isUserLoggedIn()?(PMW.setLoading(i18next.t("pmwjs_loading")),PMW.util.require(!0,"galleryDialog",!0,function(){PMW.doOpenGalleryDialog(idFolder)})):PMW.util.redirectToLoginPage(window.location.href)},openSummaryDialog:function(idPosterHash,idProduct,mode,callBack,onError,onClose){PMW.setLoading(i18next.t("pmwjs_loading")),PMW.util.require(!0,"summaryDialog",!0,PMW.doOpenSummaryDialog.bind(this,idPosterHash,idProduct,mode,callBack,onError,onClose))},doOpenSummaryDialog:function(idPosterHash,idProduct,mode,onPayButtonClick,onError,onClose){PMW.write(PMW.util.site_url("cart/purchaseSummary"),{hid:idPosterHash,prodid:idProduct,mode:mode,isPosterMaker:PMW.isPosterMaker()?1:0}).done(function(r){var summaryDialog;PMW.setLoading(null),"success"===r.status?((summaryDialog=PMW.openModalDialog("summary-dialog","download"===mode?i18next.t("pmwjs_pay_and_download"):i18next.t("pmwjs_pay_and_publish"),{},!0,"-auto")).find(".content").html(r.data),PMW.onClick(summaryDialog,".pay-credits",function(){$(this).find(".btn-continue-checkout").prop("disabled",!0),PMW.setLoading(i18next.t("pmwjs_processing")),onPayButtonClick()}),PMW.onClick(summaryDialog,".btn-buy-credits",function(){var checkoutParams={cb:function(data){summaryDialog.find(".count.-credits").html(parseInt(data.credits)),PMW.closeModalDialog("checkout-modal")}};PMW.checkout.showCheckoutDialog(PMW.checkout.MODE_BUY_CREDIT_PACK,checkoutParams)}),"function"==typeof onClose&&PMW.onClick(summaryDialog,".header .modal-btn-close",onClose),window.initResponsiveToolTips&&initResponsiveToolTips()):("function"==typeof onError?onError:alert)(r.message)})},openCollaboratorsDialog:function(idPoster){PMW.setLoading(i18next.t("pmwjs_loading")),PMW.util.require(void 0===PMW.openInviteDialog,"inviteCollaborators",!0,PMW.doOpenInviteCollaboratorsDialog.bind(PMW,idPoster))},doOpenInviteCollaboratorsDialog:function(idPoster){PMW.openInviteDialog(idPoster)},initAccessibilityMenu:function(){var btn=$(this);btn.html(btn.attr("data-opening-text")),void 0===PMW.openAccessibilityMenu?PMW.getJsAssetGroup("accessibilityWidget",(function(){PMW.openAccessibilityMenu()}).bind(this)):PMW.openAccessibilityMenu()},bindAccessibilityEvents:function(){var el=document.getElementsByClassName("js-open-userway-accessibility-menu");if(0<el.length)for(let i=0;i<el.length;i++)el[i].addEventListener("click",PMW.initAccessibilityMenu)},CURRENCY_CODE_USD:"USD",PREMIUM_PLUS_ONLY_FEATURE_NAME_BRANDS:"brands",PREMIUM_PLUS_ONLY_FEATURE_NAME_EDITOR_BRANDS:"editorbrands",PREMIUM_PLUS_ONLY_FEATURE_IS_CUSTOM_DOMAIN_ENABLED:"iscustomdomainenabled",PREMIUM_ONLY_FEATURE_NAME_TEAMS:"teams",PREMIUM_ONLY_FEATURE_NAME_CONTENT_PLANNER:"contentplanner",PREMIUM_ONLY_FEATURE_NAME_BG_REMOVALS:"removebackground",PREMIUM_ONLY_FEATURE_NAME_SPELL_CHECK:"spellcheck",PREMIUM_ONLY_FEATURE_NAME_SCHEDULE_POST:"schedulepost",PREMIUM_ONLY_FEATURE_NAME_EMAIL_SENDS:"emailcampaign",PREMIUM_ONLY_FEATURE_NAME_MAILING_LIST:"mailinglist",PREMIUM_ONLY_FEATURE_NAME_CUSTOM_FONT:"customfont",PREMIUM_ONLY_FEATURE_ADD_SOCIAL_MEDIA_ACCOUNTS:"socialmediaaccounts",PREMIUM_ONLY_FEATURE_NAME_EMAIL_CAMPAIGNS_PERFORMANCE:"emailcampaignsperformance",PREMIUM_ONLY_FEATURE_NAME_EMAIL_CAMPAIGNS_AUDIENCE:"emailcampaignsaudience",PREMIUM_ONLY_FEATURE_NAME_PUBLISH_EMAIL_CAMPAIGN:"publishemailcampaign",INTRO_FEATURE_NAME_CONTENT_PLANNER:"intro-contentplanner",PUBLISH_EMAIL_CAMPAIGNS_MYSTUFF_UTM_SOURCE:"publishemailcampaign_mystuff",PUBLISH_EMAIL_CAMPAIGNS_EMAIL_MAKER_UTM_SOURCE:"publishemailcampaign_emailmaker",showPremiumOnlyFeatureDialog:function(featureName,utmContentForCTA="",utmMediumForCTA="",utmSourceForCTA=""){"string"!=typeof featureName&&(featureName=""),PMW.openDialogV2("premium-only-dialog","-standard",PMW.util.site_url("premium/premiumOnlyDialog"),{featureName:featureName,utmSourceForCTA:utmSourceForCTA,utmMediumForCTA:utmMediumForCTA,utmContentForCTA:utmContentForCTA},null,!0,".premium-dialog-custom-close, .premium-marketing-btn, .premium-custom-cross-btn",!0)},showPostFreeDownloadDialog:function(){PMW.openDialogV2("premium-post-free-download-dialog","-standard",PMW.util.site_url("premium/premiumPostFreeDownloadDialog"),{},null,!0,"",!0)},showPremiumIntroFeatureDialog:function(featureName){"string"!=typeof featureName&&(featureName=""),PMW.openDialogV2("premium-intro-dialog","",PMW.util.site_url("premium/premiumIntroDialog"),{featureName:featureName},null,!1,".premium-dialog-custom-close, .premium-marketing-btn, .premium-custom-cross-btn",!0)},showPremiumWalkthroughDialog:function(featureName=""){let id="premium-walkthrough-dialog";PMW.openDialogV2(id,"",PMW.util.site_url("premium/premiumWalkthroughDialog"),{featureName:featureName},function(){PMW.util.setCookie(postermywall.Core.COOKIE_BRANDS_WALKTHROUGH_DIALOG,"1",365),PMW.onClick($(`#${id}`),".js-premium-cta-container",function(){var activePanel=parseInt($(this).find(".js-premium-next")[0].value)+1;activePanel<$(this).attr("data-value")?($(".js-premium-info-container").addClass("_hidden").removeClass("fadeIn"),$(".js-premium-graphic-container").addClass("_hidden").removeClass("fadeIn"),$(".js-premium-container-"+activePanel).removeClass("_hidden").addClass("fadeIn")):PMW.closeModalV2.call(this,id)}),PMW.onClick($(`#${id}`),".js-back-button",function(){var activePanel=parseInt($(this).find(".js-premium-back")[0].value)-1;$(".js-premium-info-container").addClass("_hidden").removeClass("fadeIn"),$(".js-premium-graphic-container").addClass("_hidden").removeClass("fadeIn"),$(".js-premium-container-"+activePanel).removeClass("_hidden").addClass("fadeIn")})},!1,".premium-custom-cross-btn",!1)},initStickyNav:function(){var header=document.querySelector("header");"undefined"!=typeof IntersectionObserver&&new IntersectionObserver(function(entries,sectionOneObserver){entries.forEach(function(entry){var nav=document.getElementById("nav");entry.isIntersecting?nav.classList.remove("-scrolled","-sticky","navFadeIn"):nav.classList.add("navFadeIn","-sticky","-scrolled")})},{rootMargin:"60px 0px 0px 0px"}).observe(header)},initStickyDiv:function(stickyDiv,classNames,opts={}){let topDistance=opts.topDistance,finishDiv=opts.finishDiv,iOSObserverNavbar=null;function toggleStickyClass(){var hasFinalSectionReached=stickyDiv.height()+topDistance,hasFinalSectionReached=finishDiv&&finishDiv[0].getBoundingClientRect().top<=hasFinalSectionReached;iOSObserverNavbar?stickyDiv.toggleClass(classNames,Math.floor(iOSObserverNavbar[0].getBoundingClientRect().y)<=topDistance&&!hasFinalSectionReached):stickyDiv.toggleClass(classNames,Math.floor(stickyDiv[0].getBoundingClientRect().y)<=topDistance&&!hasFinalSectionReached)}"number"!=typeof topDistance&&(topDistance=0),"object"!=typeof finishDiv&&(finishDiv=null),PMW.isIOS()&&(iOSObserverNavbar=$('<div id="observer-navbar"></div>'),iOSObserverNavbar.insertBefore(stickyDiv)),toggleStickyClass(),window.addEventListener("scroll",PMW.debounce(toggleStickyClass,10),{passive:!0})},addVersion:function(url){return-1==url.indexOf("?")?url+"?_="+PMW.VERSION:url+"&_="+PMW.VERSION},getJsAssetGroup:function(assetGroupName,successCallBack,failCallBack,alwaysCallBack){void 0===failCallBack&&(failCallBack=null),void 0===alwaysCallBack&&(alwaysCallBack=null);var url=this.addVersion(PMW.util.site_url("asset/getJsAssetGroup?assetgroup="+assetGroupName));return $.ajax({dataType:"script",cache:!0,url:url}).done(function(){"function"==typeof successCallBack&&successCallBack()}).fail(function(r){console.log(r),"function"==typeof failCallBack?failCallBack():alert(i18next.t("pmwjs_problem_check_internet_connection_reload"))}).always(function(){"function"==typeof alwaysCallBack&&alwaysCallBack()})},getJsAndCssAssetGroup:function(assetGroupName,cb){$.when($.ajax({dataType:"script",cache:!0,url:this.addVersion(PMW.util.site_url("asset/getJsAssetGroup?assetgroup="+assetGroupName))}),$.ajax({cache:!0,url:this.addVersion(PMW.util.site_url("asset/getCssAssetGroup?assetgroup="+assetGroupName))})).then(function(data,css){$("<style>"+css+"</style>").appendTo("head"),$.isFunction(cb)&&cb()}).fail(function(){alert(i18next.t("pmwjs_problem_check_internet_connection_reload"))})},initButtonsOnDialog:function(buttons,modal){$.each(buttons,function(name,props){modal.find(".footer .primary-actions").append(PMW.createButtonElement(name,props))})},createButtonElement:function(name,props){var btn=$('<div class="btn primary medium"><button>'+name+"</button></div>");if("function"==typeof props)PMW.onClick(btn,null,props);else if("object"==typeof props&&("function"==typeof props.ch&&PMW.onClick(btn,null,props.ch),"string"==typeof props.classes&&btn.addClass(props.classes),"string"==typeof props.size&&(btn.removeClass("medium"),btn.addClass(props.size)),"string"==typeof props.type))switch(props.type){case"secondary":case"link":btn.removeClass("btn-primary primary"),btn.addClass("secondary btn-secondary");break;case"danger":btn.removeClass("btn-primary primary"),btn.addClass("danger btn-danger")}return btn},addBackButtonToModal:function(modal,backAction){PMW.removeBackButtonToModal(modal);var backBtn='<div class="modal-header-action back '+backAction.classes+'" title="'+i18next.t("pmwjs_back")+'"><i class="icon icon-back action-icon"></i></div>';modal.find(".header .title").addClass("-has-back").prepend(backBtn),PMW.onClick(modal.find(".header .title .back"),null,backAction.callback)},removeBackButtonToModal:function(modal){modal.find(".modal-header-action.back").remove(),modal.find(".header .title").removeClass("-has-back")},addTopActionsToModal:function(topActions,modal){var responsiveSettings;0<topActions.length&&(0===modal.find(".actions-responsive").length&&(responsiveSettings=$('<div class="modal-header-actions modal-actions actions-responsive"><a href="javascript:void(0)" class="modal-header-action "><i class="icon icon-menu-dots action-icon" title="Options"></i></a><div class="responsive-settings-container"></div></div>'),modal.find(".header .top-actions-bar").append(responsiveSettings),PMW.onClick($(".actions-responsive"),null,function(){$(this).toggleClass("-open")})),0===modal.find(".top-actions-bar > .modal-header-actions").length&&modal.find(".header .top-actions-bar").append($('<div class="modal-header-actions"></div>')),$.each(topActions,function(i,topAction){var hClone="",h=topAction.icon?"-has-icon":"",hClone=topAction.icon?'<i class="icon '+topAction.icon+' action-icon" title="'+topAction.label+'"></i><span class="action-label">'+topAction.label+"</span>":'<span class="action-label">'+topAction.label+"</span>",h=$('<a href="javascript:void(0)" class="modal-header-action '+h+'">'+hClone+"</a>"),hClone=h.clone();modal.find(".header .modal-header-actions:not(.actions-responsive)").addClass("-multiple-actions").append(h),modal.find(".responsive-settings-container").append(hClone),h.addClass(topAction.classes),hClone.addClass(topAction.classes),PMW.onClick(h,null,topAction.callback),PMW.onClick(hClone,null,topAction.callback)}),this.monitorAndUpdateModalTopActionChange(modal))},monitorAndUpdateModalTopActionChange:function(modal){var target=modal.find(".top-actions-bar .modal-header-actions"),targetNode=target.get(0),observer=(function(){let t=$(this);1<t.find(".top-actions-bar .modal-header-actions:not(.actions-responsive) .modal-header-action:visible").length?target.addClass("-multiple-actions"):target.removeClass("-multiple-actions")}).bind(modal);targetNode&&(observer=PMW.attachAndGetMutationObserverToElement(targetNode,observer,{childList:!0,attributes:!0}),modal.data("topActionObserver",observer))},openModalDialog:function(idModal,title,buttons,destroyOnClose,modalClass,experimental,topActions){void 0===destroyOnClose&&(destroyOnClose=!1),void 0===topActions&&(topActions=[]);var modal,html=$("html"),footer=$("body");return footer.addClass("-open-modal"),(void 0===experimental||html.hasClass("oldie")||html.hasClass("ie9"))&&(experimental=!1),void 0===modalClass&&(modalClass=""),void 0===PMW.modals[idModal]?(PMW.modals[idModal]=destroyOnClose?"open-destroy":"open",footer.append($('<div class="modal modal-open '+(experimental?"vertical-align-wrap":"")+'" id="'+idModal+'">'+(experimental?'<div class="vertical-align">':"")+'<div class="modal-content"><div class="header"><div class="title"><h2>'+title+'</h2></div><div class="top-actions-bar"><div class="modal-header-actions"><a href="javascript:void(0)" class="modal-header-action close modal-btn-close"><i class="icon icon-close" title="'+i18next.t("pmwjs_close")+'"></i></a></div></div></div><div class="content"><progress class="icon-circular-loader js-modal-loader modal-loader -medium _unmargin"></progress></div></div>'+(experimental?"</div>":"")+"</div>")),modal=$("#"+idModal).addClass(modalClass),this.animateOpenModalDialogContent(modal,MODAL_ANIMATION_TYPE_OPEN),this.addTopActionsToModal(topActions,modal),this.bindModalCloseEvents(idModal),$.isEmptyObject(buttons)||(footer=$('<div class="footer vertical-align-wrap"><div class="vertical-align"><div class="primary-actions"></div></div></div>'),modal.find(".modal-content").append(footer),this.initButtonsOnDialog(buttons,modal)),modal.find(".close").on("click",this.closeModalDialog.bind(this,idModal))):"closed"===PMW.modals[idModal]?((modal=$("#"+idModal)).addClass("modal-open"),this.animateOpenModalDialogContent(modal,MODAL_ANIMATION_TYPE_OPEN)):"closing"===PMW.modals[idModal]?(modal=$("#"+idModal),PMW.queuedOpenModal=PMW.openModalDialog.bind(this,idModal,title,buttons,destroyOnClose)):modal=$("#"+idModal),PMW.bringToFrontOfModals(modal),this.monitorAndUpdateModalTopActionChange(modal),modal},getModalAnimationClass:function(modal,animationType){return PMW.doesModalNeedAnimationReversal(modal)?animationType===MODAL_ANIMATION_TYPE_OPEN?"animate-modal-dialog-open -reverse":"animate-modal-dialog-close -reverse":animationType===MODAL_ANIMATION_TYPE_OPEN?"animate-modal-dialog-open":"animate-modal-dialog-close"},doesModalNeedAnimationReversal:function(modal){return modal.hasClass("-full-height")},animateOpenModalDialogContent:function(modal,animationType){let modalAnimationClass=this.getModalAnimationClass(modal,animationType),modelContent=modal.find(".modal-content");modelContent.addClass(modalAnimationClass).one(PMW.util.animationEndEvents,function(){modelContent.removeClass(modalAnimationClass)})},bindModalCloseEvents:function(idModal,customCloseModalFunction){function doIfClickedInAreaOutsideModal(id,e,cb){var dlgContentSelector,tar,modalEl;$("#"+idModal).hasClass("modal-open")&&(dlgContentSelector="#"+id+" .modal-content",tar=$(e.target),modalEl=document.getElementById(idModal),0<tar.length&&0===tar.parents(dlgContentSelector).length&&(0<tar.parents("#"+idModal).length||e.target===modalEl)&&cb())}void 0===customCloseModalFunction&&(customCloseModalFunction=null),(function(){var doc=$(document);doc.data(PMW.getModalInitIdentifier(idModal))||doc.on("keydown.modal",(function(id,e){$("#"+idModal+":not(.no-close)").hasClass("modal-open")&&27===e.which&&("function"==typeof customCloseModalFunction?customCloseModalFunction():PMW.closeModalDialog(id))}).bind(this,idModal)),doc.data(PMW.getModalInitIdentifier(idModal),!0)}).call(this);var modalSelector=$("#"+idModal+":not(.close-only-by-esc):not(.no-close)"),hasBeenClickedOutsideModal=!1;modalSelector.on("mousedown touchstart",(function(id,e){doIfClickedInAreaOutsideModal.call(this,id,e,function(){hasBeenClickedOutsideModal=!0})}).bind(this,idModal)),modalSelector.on("mouseup touchend",(function(id,e){doIfClickedInAreaOutsideModal.call(this,id,e,(function(id){hasBeenClickedOutsideModal&&("function"==typeof customCloseModalFunction?customCloseModalFunction():PMW.closeModalDialog(id)),hasBeenClickedOutsideModal=!1}).bind(this,id))}).bind(this,idModal))},getModalInitIdentifier:function(id){return"modal-id-"+id},addModalWarning:function(modal,text){modal.find(".header").after('<div class="modal-message-strip -warning"><span><i class="icon icon-info"></i>'+text+"</span></div>")},addModalError:function(modal,text){modal.find(".header").after('<div class="modal-message-strip -error"><span><i class="icon icon-exclamation-triangle"></i>'+text+"</span></div>")},removeModalMessage:function(modal){modal.find(".modal-message-strip").slideUp(300).remove()},addTabsToDialog:function(modal,tabs){var tabsHTML=$('<div class="modal-header-tabs"></div>'),header=modal.find(".header");header.addClass("has-tabs"),$.each(tabs,function(i,tab){var tabHTML=$('<h5 class="modal-header-tab '+tab.classes+'">'+tab.label+"</h5>");tabsHTML.append(tabHTML),PMW.onClick(tabHTML,null,function(){$(this).addClass("selected").siblings(".modal-header-tab").removeClass("selected"),tab.callback.call(this)})}),header.prepend(tabsHTML)},destroyModalDialog:function(idModal){return PMW.modals[idModal]="open-destroy",PMW.closeModalDialog(idModal)},disconnectTopActionObserver:function(modal){let topActionObserver=modal.data("topActionObserver");topActionObserver&&"object"==typeof topActionObserver&&topActionObserver.disconnect()},closeModalDialog:function(idModal){var dfd=jQuery.Deferred(),modal=$("#"+idModal),mc=modal.find(".modal-content"),destroy=!1;if("closing"===PMW.modals[idModal])return dfd.resolve(),dfd.promise();"open-destroy"===PMW.modals[idModal]&&(destroy=!0),PMW.modals[idModal]="closing";let tooltipEl=$(".tooltip");0<tooltipEl.length?tooltipEl.remove():$.noop();let closeModalAnimationClass=PMW.getModalAnimationClass(modal,MODAL_ANIMATION_TYPE_CLOSE);return modal.addClass("modal-closing"),mc.addClass(closeModalAnimationClass).one(PMW.util.animationEndEvents,function(){modal.removeClass("modal-open"),mc.removeClass(closeModalAnimationClass),destroy?(modal.remove(),delete PMW.modals[idModal]):PMW.modals[idModal]="closed",dfd.resolve(),$.isFunction(PMW.queuedOpenModal)&&(PMW.queuedOpenModal(),PMW.queuedOpenModal=null),0===$(".modal.modal-open").length&&$("body").removeClass("-open-modal")}),modal.trigger("modal:close"),PMW.disconnectTopActionObserver(modal),dfd.promise()},openDialogV2:function(id,modalClasses,htmlContentURL,urlParams,cb,showClose,handleForCustomCloseButton,allowCloseWhenClickedOutsideModal,onCloseCallback){var mc,body=$("body");null==cb&&(cb=function(){}),null==onCloseCallback&&(onCloseCallback=function(){}),void 0===showClose&&(showClose=!0),void 0===handleForCustomCloseButton&&(handleForCustomCloseButton=null),mc='<div id="'+id+'" class="modal-v2 -waiting '+modalClasses+' "><div class="content"></div></div>',body.addClass("-open-modal").append(mc);var modal=$("#"+id);PMW.bringToFrontOfModals(modal),PMW.load(modal.find(".content"),htmlContentURL,urlParams,(function(id,showClose,handleForCustomCloseButton){modal.addClass("-open");var t=$("#"+id).find(".content");t.parents(".modal-v2").removeClass("-waiting");var fc=t.find(">:first-child"),elementsToTriggerClose=[];fc.addClass("-open"),showClose&&(fc.append('<i tabindex="0" class="hidden-phone hidden-tablet close-modal-v2 pmw-icon size-icon-24 -dark  icon-close -square"></i><i tabindex="0" class="hidden-desktop close-modal-v2 pmw-icon size-icon-20 -dark  icon-close -square"></i>'),elementsToTriggerClose.push(t.find(".close-modal-v2"))),"string"==typeof handleForCustomCloseButton&&elementsToTriggerClose.push($(handleForCustomCloseButton)),$(elementsToTriggerClose).each((function(id,i,handle){handle.on("click",PMW.closeModalV2.bind(this,id,onCloseCallback))}).bind(this,id)),$(document).on("keydown.modalv2",(function(id,e){27===e.which&&PMW.closeModalV2.call(this,id,onCloseCallback)}).bind(this,id)).on("click.modalv2",(function(id,e){var dlgContentSelector="#"+id+" .content:first-child";0===$(e.target).parents(dlgContentSelector).length&&allowCloseWhenClickedOutsideModal&&PMW.closeModalV2.call(this,id,onCloseCallback)}).bind(this,id)),cb()}).bind(this,id,showClose,handleForCustomCloseButton))},closeModalV2:function(id,cb){null==cb&&(cb=function(){});var el=$("#"+id),zoomOutEl=el.find(">.content").find(">:first-child");0===$(".modal.modal-open").length&&$("body").removeClass("-open-modal"),zoomOutEl.on(PMW.util.animationEndEvents,function(){el.addClass("-close"),el.remove(),cb()}),el.addClass("-closing"),zoomOutEl.addClass("-close"),$(document).off("keydown.modalv2").off("click.modalv2")},initDropDown:function(id,cb){const jqSel=$("#"+id),p=jqSel.parent(".pmw-dropdown"),lbl=jqSel.siblings(".dropdown-label"),ic=lbl.find(".dropdown-icon");lbl.attr("data-value")&&jqSel.attr("data-value",lbl.attr("data-value")),$(document).mouseup(function(e){0<$(e.target).parents(".pmw-dropdown").length||jqSel.find(".dropdown-label").is(e.target)||!jqSel.prop("checked")||jqSel.prop("checked",!1).change()}),jqSel.on("value",function(e,v){var p=jqSel.parent(".pmw-dropdown"),selVal=p.find('.dropdown-content-item[data-value="'+v+'"]');0<selVal.length&&(ic.appendTo(p.find(".dropdown-label").html(selVal.html())),selVal.addClass("dropdown-selected").siblings().removeClass("dropdown-selected"),jqSel.attr("data-value",v),jqSel.trigger("update"))}),PMW.onClick(lbl,null,function(){jqSel.prop("checked",!jqSel.prop("checked")).change()}),PMW.onClick(jqSel.parent(".pmw-dropdown"),".dropdown-content-item",function(){let t=$(this);if(!t.hasClass("-cta")){t.addClass("dropdown-selected").siblings().removeClass("dropdown-selected");let dropdownLabel=p.find(".dropdown-label:visible");if(dropdownLabel.hasClass("-button")?dropdownLabel.find(".btn-text").html(t.html()):ic.appendTo(dropdownLabel.html(t.html())),jqSel.attr("data-value",$(this).attr("data-value")),jqSel.prop("checked",!1).change(),jqSel.trigger("update"),void 0!==t.attr("data-href")&&""!==t.attr("data-href")){let url=t.attr("data-href"),isHashUrl="#"===url.substring(0,1);isHashUrl?window.location.hash=url:window.location.href=url}}"function"==typeof cb&&cb(t)}),jqSel.on("change",function(){ic.toggleClass("-inverted"),p.toggleClass("-open")}),p.find('.dropdown-content-item[data-value="'+p.find(".dropdown-label").attr("data-value")+'"]').addClass("dropdown-selected")},isMobileApp:function(){return-1!==navigator.userAgent.toLowerCase().indexOf("convertify")},isMobileScreenWidth:function(){return $(window).width()<=PMW.MOBILE_SCREEN_BREAKPOINT},isIpadScreenWidth:function(){var screenWidth=$(window).width();return screenWidth>PMW.MOBILE_SCREEN_BREAKPOINT&&screenWidth<=PMW.TABLET_SCREEN_BREAKPOINT},handleGoogleOAuthRedirect:function(){var state=PMW.util.getOAuthRedirectedValue("state"),token=PMW.util.getOAuthRedirectedValue("id_token");PMW.google.connect(token,new SSORedirectHelper(null,state.url))},updateModalDialogTitle:function(modal,title,isCaseSensitive=!1){let titleEl=modal.find(".title h2");titleEl.text(title),isCaseSensitive&&titleEl.addClass("-no-text-transform")},initAndLazyloadGraphics:function(){PMW.util.require(void 0===PMW.initLazyLoadGraphics,"lazyloadGraphics",!1,function(){PMW.initLazyLoadGraphics()})},appendFooterToModalDialog:function(modal){var mc,footer,content;0===modal.find(".footer").length&&(mc=modal.find(".modal-content"),footer=$('<div class="footer vertical-align-wrap"><div class="vertical-align"><div class="primary-actions"></div></div></div>'),content=mc.find(".content"),mc.append(footer),modal.hasClass("-auto")||content.innerHeight(mc.outerHeight()-modal.find(".header").outerHeight(!0)-footer.outerHeight(!0)-parseInt(content.css("padding-top").replace("px",""),10)-parseInt(content.css("padding-bottom").replace("px",""),10)))},createModalDialogButtons:function(modal,buttons,replace){PMW.appendFooterToModalDialog(modal),void 0!==replace&&!0!==replace||modal.find(".primary-actions .btn").remove(),PMW.initButtonsOnDialog(buttons,modal)},freeEditDialog:function(response,facade){var modal={};modal[i18next.t("pmwjs_recreate_for_free")]=function(){setTimeout(function(){window.location.href=PMW.util.site_url("cart/downloadregen/"+idOrder)},250)},modal[i18next.t("pmwjs_place_new_order")]=function(){response.url?PMW.postCheckoutProcessing(response):PMW.checkout.showCheckoutDialog(PMW.checkout.MODE_DOWNLOAD,checkout,facade),PMW.closeModalDialog("free-edit")};var idOrder=response.idOrder,checkout=response.checkout,modal=PMW.openModalDialog("free-edit",i18next.t("pmwjs_free_edit"),modal,!1,PMW.isPosterMaker()?"-flex":"");0===modal.find(".content p").length&&modal.find(".content").html("<p>"+i18next.t("pmwjs_recently_purchased_allow_three_edits")+"</p>")},postCheckoutProcessing:function(response,form,callback){form=void 0===form?$(".js-form-buy-download"):form;var facade,em=i18next.t("pmwjs_error_processing_request_try_again");PMW&&$.isFunction(PMW.setLoading)&&(PMW.setLoading(null),form&&form.find('[type="submit"]').prop("disabled","").parent().removeClass("disabled")),null==response?alert(em):response.message?0<response.premium?PMW.premiumContentBlockMessage():form&&form.find(".promo-error").removeClass("_hidden").html(response.message):response.url?window.location.href=response.url:response.checkout?"function"==typeof callback?(response.checkout.is=1,response.checkout.cb=callback,facade=null,PMW.isOldPosterMaker()&&(facade=puremvc.Facade.getInstance(postermywall.Core.CORE_NAME)),PMW.checkout.showCheckoutDialog(PMW.checkout.MODE_DOWNLOAD,response.checkout,facade)):PMW.checkout.showCheckoutDialog(PMW.checkout.MODE_DOWNLOAD,response.checkout):alert(em)},loadAddThisToolbox:function(el,cb){cb=cb||null;var u=el.attr("data-url");null!=u&&0<u.length&&PMW.load(el,PMW.util.site_url("addthis/toolbox"),{url:u,title:el.attr("data-title"),count:el.attr("data-count"),compact:el.attr("data-compact"),track:el.attr("data-track"),style:el.attr("data-style"),loadScript:"undefined"==typeof addthis},function(){window.addthis_config={data_track_addressbar:!0,lang:PMW.util.getLanguage()},"undefined"==typeof addthis?$.getScript("https://s7.addthis.com/js/300/addthis_widget.js#pubid=jafferhaider&async=1",(function(){"undefined"!=typeof addthis&&PMW.initAddThis(el.attr("data-gaCategory"),el.attr("data-gaAction"),cb)}).bind(this)):PMW.initAddThis(el.attr("data-gaCategory"),el.attr("data-gaAction"),cb)})},initAddThis:function(cb){PMW.addThisInit||(PMW.addThisInit=!0,addthis.init()),addthis.toolbox(".addthis_toolbox_parent"),$.isFunction(cb)&&cb()},debounce:function(func,wait,immediate){function later(context,args){timeout=null,args&&(result=func.apply(context,args))}var timeout,result,debounced=restArgs(function(args){var callNow=immediate&&!timeout;return timeout&&clearTimeout(timeout),callNow?(timeout=setTimeout(later,wait),result=func.apply(this,args)):immediate||(timeout=PMW.delay(later,wait,this,args)),result});return debounced.clear=function(){clearTimeout(timeout),timeout=null},debounced},delay:restArgs(function(func,wait,args){return setTimeout(function(){return func.apply(null,args)},wait)}),initializeCache:function(namespace,v){PMW.cacheNamespace=namespace;var version=this.getCacheItem("version");(null===version||null!==version&&version.number!==v)&&(this.clearNamespaceFromCache(PMW.cacheNamespace),this.setCacheItem("version",{number:v}))},loadIntroSlides:function(request){PMW.util.require(void 0===PMW.openIntroSlides,"introSlides",!0,function(){PMW.openIntroSlides(request)})},setCacheItem:function(k,data,e){var value={d:data,e:("number"==typeof e?e:PMW.DEFAULT_CACHE_EXPIRY)+(new Date).getTime()},value=JSON.stringify(value);if(k=PMW.cacheNamespace+"."+k,window.localStorage)try{window.localStorage.setItem(k,value)}catch(ex){PMW.fallbackCache_[k]=value}else PMW.fallbackCache_[k]=value},getVersionedCacheItem:function(k,vck,v){var cachedVersion=this.getCacheItem(vck);return cachedVersion?cachedVersion<v?null:this.getCacheItem(k):(this.setCacheItem(vck,v),null)},deleteCacheItem:function(k){k=PMW.cacheNamespace+"."+k,window.localStorage&&(window.localStorage.removeItem(k),void 0!==PMW.fallbackCache_[k]&&delete PMW.fallbackCache_[k])},getCacheItem:function(k){var v;if(k=PMW.cacheNamespace+"."+k,window.localStorage?null===(v=window.localStorage.getItem(k))&&"string"==typeof PMW.fallbackCache_[k]&&(v=PMW.fallbackCache_[k]):"string"==typeof PMW.fallbackCache_[k]&&(v=PMW.fallbackCache_[k]),null!==v&&0<v.length)try{if((v=JSON.parse(v)).e&&v.e>(new Date).getTime())return v.d;window.localStorage.removeItem(k)}catch(e){return PMW.log("getCacheItem encountered parse error for key: "+k+" string: "+v),null}return null},clearNamespaceFromCache:function(namespace){var namespaceLength=(namespace=void 0===namespace?PMW.cacheNamespace:namespace).length;window.localStorage&&Object.keys(window.localStorage).forEach(function(key){key.substring(0,namespaceLength)==namespace&&window.localStorage.removeItem(key)}),Object.keys(PMW.fallbackCache_).forEach(function(key){key.substring(0,namespaceLength)==namespace&&PMW.fallbackCache_.removeItem(key)})},getRequest:function(uri,data,key){return PMW.getRequestAtUrl(PMW.util.site_url(uri),data,key)},getRequestAtUrl:function(url,data,key){const useCache=void 0!==key;if(useCache){var d=PMW.getCacheItem(key);if(null!==d){const def=$.Deferred();var ajaxOpts=def.promise();return def.resolveWith(this,[d]),ajaxOpts}}ajaxOpts={type:"GET",url:url,data:data,success:function(data){useCache&&PMW.setCacheItem(key,data)}};return addLocalOnlyParamsToAjax(ajaxOpts),PMW.addAjaxParamsForSubdomainToSubfolderRequests(ajaxOpts),jQuery.ajax(ajaxOpts)},initI18next:function(lang,callback){var namespace,i18nextOptions;"undefined"!=typeof Promise?(i18nextOptions={useLocalStorage:!(namespace="postermywalljs"),fallbackLng:"en",lng:lang,ns:[namespace],defaultNS:namespace,resources:{},interpolation:{escapeValue:!1}},this.getRequest("asset/getLanguage/"+encodeURIComponent(lang)+"/"+encodeURIComponent(namespace),null,"lang_"+lang).done((function(data){!1===data?PMW.showFatalError("core.js::initI18next data is false "+window.location.href):(Object.keys(data).forEach(function(key){i18nextOptions.resources[key]=[namespace],i18nextOptions.resources[key][namespace]=data[key]}),i18next.init(i18nextOptions,function(err,t){err?PMW.showFatalError("core.js::initI18next "+err+" ".window.location.href):"function"==typeof callback&&callback()}))}).bind(this)).fail(function(xhr,textStatus){PMW.showFatalError("core.js::initI18next getLanguage request failed. "+textStatus+" "+xhr.status+" "+window.location.href)})):PMW.getJsAssetGroup("bluebird",this.initI18next.bind(this,lang,callback))},showFatalError:function(err){PMW.log(err),window.confirm("Sorry, there was a problem. Press OK to reload the page.")&&window.location.reload(!0)},copyTextToClipboard:function(str,tooltip,fadeInDirection="up"){let el=document.createElement("textarea"),fadeClass="up"===fadeInDirection?"fadeInUp":"fadeInDown";el.value=str,document.body.appendChild(el),el.select(),document.execCommand("copy"),document.body.removeChild(el),null!=tooltip&&(tooltip.addClass(fadeClass+" animated fast"),setTimeout(function(){tooltip.removeClass(fadeClass+" animated fast")},2e3))},attachAndGetMutationObserverToElement:function(el,func,opts){let observer=new MutationObserver(func);return observer.observe(el,opts),observer},bringToFrontOfModals:function(el){var max=$(".modal, .modal-v2").map(function(){return $(this).css("z-index")});0<max.length&&((max=(max=max.sort())[max.length-1])>=el.css("z-index")&&el.css("z-index",parseInt(max,10)+1))},showPendingMarketingPopup:function(){void 0!==PMW.marketing&&PMW.marketing.showPendingMarketingPopups()},getDefaultSmallProfilePictureUrl:function(){return PMW.util.asset_url("images/default_profile_picture_small.png")},isDesignTipsPageOpen:function(){return window.location.hash.includes("#/designtips")||window.location.href.includes("tips")||window.location.href.includes("templateSubmissionTips")},addAjaxParamsForSubdomainToSubfolderRequests:function(ajaxOpts,isCustomXhrObject=!1){PMW.isLocal()||!PMW.areSubdomainToSubfolderAjaxParamsNeeded||["dabeta.postermywall.com","da.localpostermywall.com","da.postermywall.com"].includes(window.location.hostname)&&(isCustomXhrObject?ajaxOpts.withCredentials=!0:ajaxOpts.xhrFields={withCredentials:!0})}}),Modernizr&&Modernizr.addTest&&Modernizr.addTest("edge",function(){return!!navigator.userAgent.match(/edge/i)}),PMW.init(),document.addEventListener("DOMContentLoaded",function(){void 0!==PMW.bindAccessibilityEvents&&PMW.bindAccessibilityEvents(),$('form:not(".js-form")').each(function(){$(this).submit(PMW.formSubmit)})});
!function(){function getBrowser(){return null===browser&&(browser=bowser.getParser(window.navigator.userAgent)),browser}let browser=null;PMW.isMacOS=function(){return getBrowser().is("macOS")&&!PMW.isTouchSupported()},PMW.isAndroidOS=function(){return getBrowser().is("Android")},PMW.isEdge=function(){return getBrowser().isBrowser("Microsoft Edge")},PMW.isMobileOS=function(){return PMW.isIOS()||PMW.isAndroidOS()},PMW.isIOS=function(){return PMW.isIphone()||PMW.isIpad()},PMW.isIpad=function(){return getBrowser().is("macOS")&&PMW.isTouchSupported()},PMW.isIphone=function(){return getBrowser().is("iOS")},PMW.getBrowserVersion=function(){return getBrowser().getBrowserVersion()},PMW.getBrowserName=function(){return getBrowser().getBrowserName()},PMW.isIOSSafari=function(){return PMW.isSafari()&&PMW.isIOS()},PMW.isMacOSSafari=function(){return PMW.isSafari()&&PMW.isMacOS()},PMW.isSafari=function(){return getBrowser().isBrowser("Safari")},PMW.isFirefox=function(){return getBrowser().isBrowser("Firefox")},PMW.isIE=function(){return getBrowser().isBrowser("Internet Explorer")},PMW.isChrome=function(){return getBrowser().isBrowser("Chrome")},PMW.isTouchSupported=function(){return!!Modernizr.touchevents};let doesBrowserSupportWebmCache_=null;PMW.doesBrowserSupportWebm=function(){if(PMW.isSafari())return!1;if(null===doesBrowserSupportWebmCache_){let video=document.createElement("video");doesBrowserSupportWebmCache_="probably"===video.canPlayType('video/webm; codecs="vp8, vorbis"')}return doesBrowserSupportWebmCache_}}();
PMW.initToggleButton=function(id,btns){var showAllContainer=$(`#${id}`);PMW.onClick(showAllContainer,".js-toggle-btn:not(.-selected)",e=>{const selectedBtn=$(e.currentTarget);selectedBtn.blur(),selectedBtn.addClass("-selected").siblings(".toggle-btn.-selected").removeClass("-selected"),selectedBtn.siblings(".slider").hasClass("-second-btn")?selectedBtn.siblings(".slider").removeClass("-second-btn"):selectedBtn.siblings(".slider").addClass("-second-btn")});showAllContainer=$(`#${id}.-show-view-all`);PMW.onClick(showAllContainer,".js-toggle-btn.-selected",e=>{const selectedBtn=$(e.currentTarget);selectedBtn.find(".js-loader").removeClass("_hidden").siblings().addClass("_hidden"),selectedBtn.blur(),PMW.gtm.trackGA4CarouselToggleViewAllClick(selectedBtn.attr("data-analytics-name")),window.location=selectedBtn.attr("data-url")}),0<btns.length&&PMW.initCarouselToggle(btns)};
